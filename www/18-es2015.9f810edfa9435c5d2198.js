(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{s86I:function(e,t,n){"use strict";n.r(t),n.d(t,"IconsEditModule",(function(){return K}));var o=n("ofXK"),i=n("PCNd"),r=n("iTUp"),a=n("tyNb"),l=n("mrSG"),c=n("oaxI"),s=n("mPDR"),d=n("3Pt+"),m=n("ZQB6"),u=n("fXoL"),g=n("gIUt"),p=n("5dVO"),h=n("2g2N"),f=n("TEn/"),k=n("uvxi"),b=n("3LUQ"),v=n("qfBg"),w=n("odAe");function x(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-select-option",10),u["\u0275\u0275text"](1),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275property"]("value",e.id),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",e.title," ")}}function C(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-item"),u["\u0275\u0275elementStart"](1,"ion-label",11),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](3,"ion-input",14),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.selectedNetwork.placeholderPrefix),u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate"]("placeholder",e.selectedNetwork.placeholderValue)}}function S(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-item"),u["\u0275\u0275elementStart"](1,"ion-label",15),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](3,"ion-input",16),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.selectedNetwork.placeholderPrefix||"Link da rede social"),u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate"]("placeholder",e.selectedNetwork.placeholderValue)}}function E(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"p",19),u["\u0275\u0275elementStart"](1,"b"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](3,"br"),u["\u0275\u0275text"](4," Clique em Salvar para continuar \u{1f609} "),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("Boa, o app ",e.selectedNetwork.title," foi configurado com sucesso!")}}function I(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",22),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](4).configureFromFacebook()})),u["\u0275\u0275element"](1,"ion-icon",23),u["\u0275\u0275text"](2," Configurar com Facebook "),u["\u0275\u0275elementEnd"]()}}function _(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",22),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](4).configureFromGoogle()})),u["\u0275\u0275element"](1,"ion-icon",24),u["\u0275\u0275text"](2," Configurar com Google "),u["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"button",22),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](4).configureFromLinkedin()})),u["\u0275\u0275element"](1,"ion-icon",25),u["\u0275\u0275text"](2," Configurar com Linkedin "),u["\u0275\u0275elementEnd"]()}}function N(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275elementStart"](1,"p"),u["\u0275\u0275text"](2),u["\u0275\u0275element"](3,"br"),u["\u0275\u0275text"](4," Clique no bot\xe3o e fa\xe7a login normalmente."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"div",20),u["\u0275\u0275template"](6,I,3,0,"button",21),u["\u0275\u0275template"](7,_,3,0,"button",21),u["\u0275\u0275template"](8,y,3,0,"button",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"]("N\xf3s podemos te ajudar a configurar o ",e.selectedNetwork.title," mais rapidamente! \u{1f680} "),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngIf",e.socialNetworkIntegrations[e.selectedNetwork.key].hasFacebookIntegration),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.socialNetworkIntegrations[e.selectedNetwork.key].hasGoogleIntegration),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.socialNetworkIntegrations[e.selectedNetwork.key].hasLinkedinIntegration)}}function P(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",17),u["\u0275\u0275template"](1,E,5,1,"p",18),u["\u0275\u0275template"](2,N,9,4,"ng-container",5),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.socialNetworkAutoConfigured),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.socialNetworkAutoConfigured)}}function F(e,t){if(1&e&&(u["\u0275\u0275elementContainerStart"](0),u["\u0275\u0275template"](1,C,4,2,"ion-item",5),u["\u0275\u0275template"](2,S,4,2,"ion-item",5),u["\u0275\u0275elementStart"](3,"ion-item"),u["\u0275\u0275elementStart"](4,"ion-label",11),u["\u0275\u0275text"](5,"Escolha um nome para seu aplicativo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](6,"ion-input",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](7,P,3,2,"div",13),u["\u0275\u0275elementContainerEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",null==e.selectedNetwork?null:e.selectedNetwork.baseUrl),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!(null!=e.selectedNetwork&&e.selectedNetwork.baseUrl)),u["\u0275\u0275advance"](4),u["\u0275\u0275propertyInterpolate"]("placeholder",e.selectedNetwork.title),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.socialNetworkIntegrations[e.selectedNetwork.key]&&(null==e.platform?null:e.platform.isWeb))}}function O(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-grid"),u["\u0275\u0275elementStart"](1,"ion-row"),u["\u0275\u0275elementStart"](2,"ion-col",26),u["\u0275\u0275elementStart"](3,"ion-button",27),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().remove()})),u["\u0275\u0275text"](4," Excluir "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}let V=(()=>{class e{constructor(e,t,n,o,i,r,a,l,c){this._socialNetworkService=e,this._loader=t,this._toast=n,this._modalCtrl=o,this._cardService=i,this._alertService=r,this._userService=a,this._activatedRoute=l,this.platform=c,this.socialNetworks=[],this.socialNetworkIntegrations={email:{hasGoogleIntegration:!0,hasFacebookIntegration:!0,hasLinkedinIntegration:!0}},this._socialMediaHelper=new m.a(this._userService),this.initForm()}ngOnInit(){this.icon&&this.setForm(),this.getSocialNetworks(()=>{this.verifySocialNetwork();const e=this._activatedRoute.snapshot.queryParams.code;e&&(this.selectedNetwork=this.socialNetworks.find(e=>e.key==this._activatedRoute.snapshot.queryParams.configuring),this.iconForm.get("socialNetwork").setValue(this.selectedNetwork.id),this.configureFromLinkedin(e))})}initForm(){this.iconForm=new d.d({socialNetwork:new d.a(null,d.o.required),link:new d.a(null),nick:new d.a(null),title:new d.a(null)})}setForm(){var e;this.iconForm.get("socialNetwork").setValue(this.icon.socialNetwork.id),this.iconForm.get("title").setValue(null===(e=this.icon)||void 0===e?void 0:e.title),this.icon.nick?this.iconForm.get("nick").setValue(this.icon.nick):this.iconForm.get("link").setValue(this.icon.link)}verifySocialNetwork(){this.socialNetworkAutoConfigured=!1;const e=this.iconForm.get("socialNetwork");this.selectedNetwork=this.socialNetworks.find(t=>t.id==e.value),this.selectedNetwork&&(this.selectedNetwork.baseUrl?this.iconForm.get("nick").setValidators(d.o.required):this.iconForm.get("link").setValidators(d.o.required))}getSocialNetworks(e){this._socialNetworkService.getAll().subscribe(t=>{this._loader.dismiss(),this.socialNetworks=t,e&&e()},e=>{this._toast.showHttpError(e)})}save(){const e={socialNetworkId:this.iconForm.get("socialNetwork").value,nick:this.iconForm.get("nick").value,link:this.iconForm.get("link").value,title:this.iconForm.get("title").value};let t,n;this.icon?(e.key=this.icon.key,t=this._cardService.updateIcon(e),n="\xcdcone editado \u{1f609}"):(t=this._cardService.addIcon(e),n="\xcdcone adicionado \u{1f603}"),this._loader.show(),t.subscribe(e=>{this._loader.dismiss(),this._toast.show(n),this._modalCtrl.dismiss({ok:!0})},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}cancel(){this._modalCtrl.dismiss()}remove(){this._alertService.show({subHeader:"Tem certeza que deseja excluir?",buttons:[{text:"N\xe3o",role:"cancel"},{text:"Sim",cssClass:"danger",handler:()=>{this._loader.show(),this._cardService.removeIcon(this.icon.key).subscribe(e=>{this._loader.dismiss(),this._toast.show("\xcdcone removido"),this._modalCtrl.dismiss({ok:!0})},e=>{this._loader.dismiss(),this._toast.showHttpError(e)})}}]})}configureFromFacebook(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this._socialMediaHelper.loginWithFacebook();switch(this.selectedNetwork.key){case"email":this.iconForm.get("nick").setValue(e.email);break;case"facebook":this.iconForm.get("nick").setValue(e.link.replace("https://www.facebook.com/",""))}this.socialNetworkAutoConfigured=!0}))}configureFromGoogle(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this._socialMediaHelper.loginWithGoogle();switch(this.selectedNetwork.key){case"email":this.iconForm.get("nick").setValue(e.email)}this.socialNetworkAutoConfigured=!0}))}configureFromLinkedin(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this._socialMediaHelper.loginWithLinkedin(e,this._getLinkedinRedirectUrl());switch(this.selectedNetwork.key){case"email":this.iconForm.get("nick").setValue(t.email)}this.socialNetworkAutoConfigured=!0}))}_getLinkedinRedirectUrl(){return`${window.location.href.split("?")[0]}?configuring=${this.selectedNetwork.key}`}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](g.a),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](f.L),u["\u0275\u0275directiveInject"](k.a),u["\u0275\u0275directiveInject"](b.a),u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](a.a),u["\u0275\u0275directiveInject"](w.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-icon-edit"]],inputs:{icon:"icon"},decls:22,vars:5,consts:[[1,"title"],[3,"formGroup"],[2,"margin-bottom","150px"],["formControlName","socialNetwork","interface","action-sheet",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"footer-bottom"],["size","6"],["color","primary","fill","outline","expand","block",3,"click"],["color","primary","expand","block",3,"click"],[3,"value"],["position","floating",2,"flex","1"],["type","text","maxlength","20","formControlName","title",3,"placeholder"],["class","integrations",4,"ngIf"],["formControlName","nick",3,"placeholder"],["position","floating"],["formControlName","link",3,"placeholder"],[1,"integrations"],["class","success",4,"ngIf"],[1,"success"],[1,"buttons"],["class","outline-button",3,"click",4,"ngIf"],[1,"outline-button",3,"click"],["name","logo-facebook"],["name","logo-google"],["name","logo-linkedin"],[2,"padding-bottom","0"],["color","danger","fill","outline","size","small","expand","block",2,"margin-bottom","0",3,"click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-content"),u["\u0275\u0275elementStart"](1,"ion-title",0),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"form",1),u["\u0275\u0275elementStart"](4,"ion-list",2),u["\u0275\u0275elementStart"](5,"ion-item"),u["\u0275\u0275elementStart"](6,"ion-label"),u["\u0275\u0275text"](7,"Selecione um aplicativo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"ion-select",3),u["\u0275\u0275listener"]("ionChange",(function(){return t.verifySocialNetwork()})),u["\u0275\u0275template"](9,x,2,2,"ion-select-option",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](10,F,8,4,"ng-container",5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"ion-footer",6),u["\u0275\u0275template"](12,O,5,0,"ion-grid",5),u["\u0275\u0275elementStart"](13,"ion-toolbar"),u["\u0275\u0275elementStart"](14,"ion-grid"),u["\u0275\u0275elementStart"](15,"ion-row"),u["\u0275\u0275elementStart"](16,"ion-col",7),u["\u0275\u0275elementStart"](17,"ion-button",8),u["\u0275\u0275listener"]("click",(function(){return t.cancel()})),u["\u0275\u0275text"](18," Cancelar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"ion-col",7),u["\u0275\u0275elementStart"](20,"ion-button",9),u["\u0275\u0275listener"]("click",(function(){return t.save()})),u["\u0275\u0275text"](21," Salvar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](t.icon?t.icon.socialNetwork.title:"Novo aplicativo"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("formGroup",t.iconForm),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("ngForOf",t.socialNetworks),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.selectedNetwork),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf",t.icon))},directives:[f.h,f.G,d.p,d.l,d.e,f.r,f.p,f.q,f.A,f.P,d.k,d.c,o.i,o.j,f.k,f.H,f.l,f.z,f.g,f.d,f.B,f.o,f.Q,d.g,f.n],styles:[".integrations[_ngcontent-%COMP%]{padding:24px 12px}.integrations[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{letter-spacing:.4px}.integrations[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--ion-color-tertiary)}.integrations[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:32px;display:flex;flex-direction:column;align-items:center;gap:12px}.integrations[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-family:montserrat;background-color:transparent;color:#414141;border:1px solid #414141;padding:0 1.1em;border-radius:4px;height:36px;display:flex;gap:8px;align-items:center;justify-content:center}"]}),e})();var M=n("a/9d"),j=n("hwGQ"),R=n("uX3w"),B=n("RDGJ"),T=n("J2Ij");let A=(()=>{class e{transform(e){return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u["\u0275\u0275definePipe"]({name:"cssRbg",type:e,pure:!0}),e})();var q=n("mtd2");const H=["imageInput"];function L(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-button",13),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).getPicture({fromGallery:!0})})),u["\u0275\u0275text"](1," Imagem "),u["\u0275\u0275elementEnd"]()}}function U(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-button",13),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](),u["\u0275\u0275reference"](11).click()})),u["\u0275\u0275text"](1," Imagem "),u["\u0275\u0275elementEnd"]()}}function z(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div",26),u["\u0275\u0275pipe"](1,"cssRbg"),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275styleProp"]("background",u["\u0275\u0275pipeBind1"](1,2,e.background.rgbColor),u["\u0275\u0275defaultStyleSanitizer"])}}const G=function(e){return{filter:e}};function $(e,t){if(1&e&&u["\u0275\u0275element"](0,"img",27),2&e){const e=u["\u0275\u0275nextContext"](2);u["\u0275\u0275property"]("src",e.background.image.url,u["\u0275\u0275sanitizeUrl"])("ngStyle",u["\u0275\u0275pureFunction1"](2,G,"blur("+.5*e.card.background.blur+"px)"))}}function D(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",6),u["\u0275\u0275elementStart"](1,"div",7),u["\u0275\u0275elementStart"](2,"ion-button",28),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"](2).updateBackground()})),u["\u0275\u0275text"](3," Atualizar "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}function Q(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-item",29),u["\u0275\u0275listener"]("click",(function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"](2).openIcon(n)})),u["\u0275\u0275element"](1,"img",30),u["\u0275\u0275pipe"](2,"socialIcon"),u["\u0275\u0275elementStart"](3,"ion-label"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"ion-reorder",31),u["\u0275\u0275element"](6,"ion-icon",32),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("src",u["\u0275\u0275pipeBind1"](2,2,e.socialNetwork),u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.title||e.socialNetwork.title)}}const J=function(e){return{color:e}};function W(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"base-content"),u["\u0275\u0275elementStart"](1,"div",5),u["\u0275\u0275elementStart"](2,"div",6),u["\u0275\u0275elementStart"](3,"div",7),u["\u0275\u0275elementStart"](4,"ion-label",8),u["\u0275\u0275text"](5,"Plano de fundo"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"div",6),u["\u0275\u0275elementStart"](7,"div",9),u["\u0275\u0275template"](8,L,2,0,"ion-button",10),u["\u0275\u0275template"](9,U,2,0,"ion-button",10),u["\u0275\u0275elementStart"](10,"input",11,12),u["\u0275\u0275listener"]("change",(function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().onImageSelected(t)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"ion-button",13),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275reference"](15).click()})),u["\u0275\u0275text"](13," Cor s\xf3lida "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"input",14,15),u["\u0275\u0275listener"]("change",(function(){u["\u0275\u0275restoreView"](e);const t=u["\u0275\u0275reference"](15);return u["\u0275\u0275nextContext"]().colorBackgroundChanged(t.value)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",16),u["\u0275\u0275template"](17,z,2,4,"div",17),u["\u0275\u0275template"](18,$,1,4,"img",18),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"div",6),u["\u0275\u0275elementStart"](20,"div",7),u["\u0275\u0275elementStart"](21,"ion-label",8),u["\u0275\u0275text"](22,"Nivel de desfoque"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](23,"ion-range",19),u["\u0275\u0275listener"]("ionChange",(function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().updateBlur(t.target.value)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](24,D,4,0,"div",20),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",5),u["\u0275\u0275elementStart"](26,"div",6),u["\u0275\u0275elementStart"](27,"ion-label",8),u["\u0275\u0275text"](28,"Seu endere\xe7o"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"small"),u["\u0275\u0275text"](30,"Essa informa\xe7\xe3o n\xe3o ser\xe1 divulgada, mas ser\xe1 utilizada nos nossos mecanismos de buscas."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](31,"div",6),u["\u0275\u0275elementStart"](32,"div",21),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().openAddressConfig()})),u["\u0275\u0275text"](33),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",5),u["\u0275\u0275elementStart"](35,"div",6),u["\u0275\u0275elementStart"](36,"ion-label",8),u["\u0275\u0275text"](37,"Suas categorias"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](38,"small"),u["\u0275\u0275text"](39,"Voc\xea pode selecionar at\xe9 3 categorias que ser\xe3o utilizadas nos nossos mecanismos de buscas."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"div",6),u["\u0275\u0275elementStart"](41,"categories-select",22),u["\u0275\u0275listener"]("onSelectionChange",(function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().updateCategories(t)})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](42,"div",23),u["\u0275\u0275elementStart"](43,"div",6),u["\u0275\u0275elementStart"](44,"div",7),u["\u0275\u0275elementStart"](45,"ion-label",8),u["\u0275\u0275text"](46,"\xcdcones"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](47,"div",6),u["\u0275\u0275elementStart"](48,"div",7),u["\u0275\u0275elementStart"](49,"ion-reorder-group",24),u["\u0275\u0275listener"]("ionItemReorder",(function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().reorder(t)})),u["\u0275\u0275template"](50,Q,7,4,"ion-item",25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",e.isCordova),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!e.isCordova),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngIf",e.background.rgbColor),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.background.image.url),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("pin",!0)("ticks",!0)("debounce",500)("value",e.card.background.blur),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",e.showButtonBgUpdate),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("ngStyle",u["\u0275\u0275pureFunction1"](13,J,null!=e.addressConfig&&e.addressConfig.description?"#000":"#9f9f9f")),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" ",(null==e.addressConfig?null:e.addressConfig.description)||"Ex.: Av. Julio de Castilhos"," "),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("selectedCategoriesIds",e.categoriesIds),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("ngForOf",e.icons)}}let X=(()=>{class e{constructor(e,t,n,o,i,r,a,l,c,s){this._cardService=e,this._loader=t,this._toast=n,this._modalCtrl=o,this._activatedRoute=i,this._platform=r,this.appPlatform=a,this._navCtrl=l,this._camera=c,this._crop=s,this.background={rgbColor:null,image:{file:null,url:""}},this.isCordova=this._platform.is("cordova")}ngOnInit(){this.getCard(),(this._activatedRoute.snapshot.queryParams.openAdd||this._activatedRoute.snapshot.queryParams.configuring)&&this.openIcon()}getCard(){this._cardService.get().subscribe(e=>{this.card=e,this.categoriesIds=this.card.categories.map(e=>e.id),this.addressConfig=this.card.address,this.card.background.colorRgb?(this.background.rgbColor=this.card.background.colorRgb,this.background.image.file=null,this.background.image.url=null):(this.background.rgbColor=null,this.background.image.url=this.card.background.imageUrl,this.background.image.file=null)},e=>{this._toast.showHttpError(e)})}updateCategories(e){this._cardService.updateCategories(e).subscribe(e=>e)}openAddressConfig(){this._modalCtrl.create({component:s.a,componentProps:{address:this.addressConfig},cssClass:"modal-40-80"}).then(e=>{e.present(),e.onDidDismiss().then(e=>{console.log(e.data),e.data&&(this.addressConfig=e.data,this._cardService.updateAddress(this.addressConfig).subscribe(e=>e,e=>{this._toast.showHttpError(e)}))})})}reorder(e){e.detail.complete(),this._cardService.updateOrder(e.detail).subscribe(e=>{this.card.icons=e,console.log(this.card.icons.map(e=>`${e.position} - ${e.socialNetwork.title}`))},e=>{this._toast.showHttpError(e)})}colorBackgroundChanged(e){const t=class{static hexToRgb(e){return(e=e.replace("#","")).match(new RegExp("(.{"+e.length/3+"})","g")).map(t=>parseInt(e.length%2?t+t:t,16))}}.hexToRgb(e);this.background.rgbColor=t,this.background.image.file=null,this.background.image.url=null}getCameraOptions(e={}){return{quality:50,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.JPEG,mediaType:this._camera.MediaType.PICTURE,correctOrientation:!0,sourceType:e.fromGallery?this._camera.PictureSourceType.PHOTOLIBRARY:this._camera.PictureSourceType.CAMERA,targetWidth:400,targetHeight:400}}getPicture(e={}){this.isCordova?(this._loader.show(),this._camera.getPicture(this.getCameraOptions(e)).then(e=>{c.a.cordovaFilePathToFile(e).then(e=>{c.a.fileToBase64(e).then(t=>{this.background.image.url=t,c.a.fileToBlob(e).then(e=>{this.background.image.file=e,this._loader.dismiss()})})})}).catch(e=>{this._loader.dismiss(),this._toast.show("Algo errado...")})):this.fileInput.nativeElement.click()}onImageSelected(e){return Object(l.a)(this,void 0,void 0,(function*(){if(e.target.files&&e.target.files.length>0){const t=e.target.files[0];c.a.fileToBase64(t).then(e=>Object(l.a)(this,void 0,void 0,(function*(){this.background.image.file=t,this.background.image.url=e,this.background.rgbColor=null,this.fileInput.nativeElement.value=null})))}}))}updateBlur(e){console.log(e),this._cardService.setBlur(e).subscribe(t=>{this.card.background.blur=e},e=>{this._toast.showHttpError(e)})}updateBackground(){this._loader.show(),this._cardService.setBackground(this.background.rgbColor||this.background.image.file).subscribe(e=>{this._loader.dismiss(),this.getCard()},e=>{this._loader.dismiss(),console.log(e),this._toast.showHttpError(e)})}openIcon(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this._modalCtrl.create({component:V,componentProps:{icon:e},cssClass:"modal-40-80"});t.onDidDismiss().then(e=>{e.data&&e.data.ok&&this.getCard()}),t.present()}))}get icons(){return this.card?this.card.icons.sort((e,t)=>e.position-t.position):[]}get showButtonBgUpdate(){return this.card.background.colorRgb?this.background.rgbColor!=this.card.background.colorRgb:this.background.image.url!=this.card.background.imageUrl}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](k.a),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](f.L),u["\u0275\u0275directiveInject"](a.a),u["\u0275\u0275directiveInject"](f.N),u["\u0275\u0275directiveInject"](w.a),u["\u0275\u0275directiveInject"](f.M),u["\u0275\u0275directiveInject"](M.a),u["\u0275\u0275directiveInject"](j.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-icons-edit"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275viewQuery"](H,!0),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first)},decls:5,vars:2,consts:[["title","Configura\xe7\xf5es","buttonBackRoute","/home/card",3,"showButtonBack"],[4,"ngIf"],["slot","fixed",1,"btn-add"],[3,"click"],["name","add"],[1,"section"],[1,"row"],[1,"col"],[2,"font-weight","bold"],["size","7",1,"col"],["size","small","color","primary","fill","outline","expand","block",3,"click",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],["imageInput",""],["size","small","color","primary","fill","outline","expand","block",3,"click"],["type","color",2,"display","none",3,"change"],["bgColor",""],["size","5",1,"col"],["class","bg-color",3,"background",4,"ngIf"],["class","bg-image",3,"src","ngStyle",4,"ngIf"],["min","0","max","10",1,"blur-level-range",3,"pin","ticks","debounce","value","ionChange"],["class","row",4,"ngIf"],[2,"margin-bottom","-5px",3,"ngStyle","click"],[3,"selectedCategoriesIds","onSelectionChange"],[1,"section",2,"margin-bottom","100px"],["disabled","false",3,"ionItemReorder"],["class","icon-item",3,"click",4,"ngFor","ngForOf"],[1,"bg-color"],[1,"bg-image",3,"src","ngStyle"],["size","small","color","primary","expand","block",3,"click"],[1,"icon-item",3,"click"],[3,"src"],["slot","end"],["name","reorder-three-outline"]],template:function(e,t){1&e&&(u["\u0275\u0275element"](0,"base-toolbar",0),u["\u0275\u0275template"](1,W,51,15,"base-content",1),u["\u0275\u0275elementStart"](2,"ion-fab",2),u["\u0275\u0275elementStart"](3,"ion-fab-button",3),u["\u0275\u0275listener"]("click",(function(){return t.openIcon()})),u["\u0275\u0275element"](4,"ion-icon",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275property"]("showButtonBack",!0),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.card))},directives:[R.a,o.j,f.i,f.j,f.n,B.a,f.q,f.d,f.v,f.P,o.k,T.a,f.x,o.i,f.p,f.w],pipes:[A,q.a],styles:["base-content[_ngcontent-%COMP%]{width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}base-content[_ngcontent-%COMP%]     .content{overflow:auto;display:flex;flex-direction:column;gap:24px;padding:24px 20px}  ion-item .item-native, base-content[_ngcontent-%COMP%]     .content{background-color:var(--background-color)}.icon-item[_ngcontent-%COMP%]{cursor:pointer}.icon-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;margin-right:6px}.bg-color[_ngcontent-%COMP%]{width:100%;height:60px}.bg-image[_ngcontent-%COMP%]{max-width:100%;max-height:80px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px}.blur-level-range[_ngcontent-%COMP%]{padding:0 12px}ion-reorder-group[_ngcontent-%COMP%]{background-color:var(--background-color)}ion-item[_ngcontent-%COMP%]{--border-color:transparent;--background:var(--background-color)}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-bottom:4px}"]}),e})(),K=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.b,i.a,d.m,r.a,a.j.forChild([{path:"",component:X}])]]}),e})()}}]);