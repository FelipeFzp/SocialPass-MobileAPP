function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{aeXx:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchModule",(function(){return Z}));var r,o=n("ofXK"),a=n("fXoL"),i=n("XNiG"),c=n("HDdC"),l=n("Kj3r"),s=n("n90K"),u=n("lGQG"),d=n("TEn/"),g=n("d1Mt"),p=n("tk/3"),m=n("vCEr"),f=n("WLwD"),h=((r=function(){function e(t,n,r){_classCallCheck(this,e),this._http=t,this._gpsService=n,this._ipService=r}return _createClass(e,[{key:"search",value:function(e,t,n){return this._http.post("".concat(g.a.api.trends,"/search/").concat(t,"/").concat(n),{terms:e})}},{key:"getAutocompletes",value:function(e){return this._http.post(g.a.api.trends+"/autocompletes",{term:e})}},{key:"searchWithDefaultCategory",value:function(e,t,n,r){var o=this;return new c.a((function(a){o._ipService.getIpv6().subscribe((function(i){var c,l;o._http.post("".concat(g.a.api.trends,"/home/category/").concat(e,"/").concat(n,"/").concat(r),{terms:t,clientAddress:i,coords:{latitude:null===(c=o._gpsService.coordinates)||void 0===c?void 0:c.latitude,longitude:null===(l=o._gpsService.coordinates)||void 0===l?void 0:l.longitude}}).subscribe((function(e){a.next(e),a.complete()}),(function(e){a.error(e)}))}))}))}},{key:"listDefaultCategories",value:function(){var e=this;return new c.a((function(t){e._ipService.getIpv6().subscribe((function(n){var r,o;e._http.post(g.a.api.trends+"/home/categories",{clientAddress:n,coords:{latitude:null===(r=e._gpsService.coordinates)||void 0===r?void 0:r.latitude,longitude:null===(o=e._gpsService.coordinates)||void 0===o?void 0:o.longitude}}).subscribe((function(e){t.next(e),t.complete()}),(function(e){t.error(e)}))}))}))}}]),e}()).\u0275fac=function(e){return new(e||r)(a["\u0275\u0275inject"](p.b),a["\u0275\u0275inject"](m.a),a["\u0275\u0275inject"](f.a))},r.\u0275prov=a["\u0275\u0275defineInjectable"]({token:r,factory:r.\u0275fac}),r);function v(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",15),a["\u0275\u0275elementStart"](1,"b"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3," \xc9 bom ter voc\xea de volta! :)"),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("Oi ",n.loggedUser.name.split(" ")[0],"!")}}function C(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",15),a["\u0275\u0275elementStart"](1,"button"),a["\u0275\u0275elementStart"](2,"b",16),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().showLogin()})),a["\u0275\u0275text"](3,"Entre"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](4," para acessar o seu cart\xe3o!"),a["\u0275\u0275elementEnd"]()}}function _(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"small"),a["\u0275\u0275text"](1,"Nome de usu\xe1rio"),a["\u0275\u0275elementEnd"]())}function x(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"small"),a["\u0275\u0275text"](1,"Categoria"),a["\u0275\u0275elementEnd"]())}function b(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"small"),a["\u0275\u0275text"](1,"Rede social"),a["\u0275\u0275elementEnd"]())}function y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit,r=a["\u0275\u0275nextContext"](),o=a["\u0275\u0275reference"](8);return r.onAutocompleteClick(e.label,o)})),a["\u0275\u0275elementStart"](1,"span"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementContainerStart"](3,17),a["\u0275\u0275template"](4,_,2,0,"small",18),a["\u0275\u0275template"](5,x,2,0,"small",18),a["\u0275\u0275template"](6,b,2,0,"small",18),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](r.label),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",r.type),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase","userName"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase","category"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase","socialMedia")}}function w(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ion-chip",19),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onDefaultCategoryTagClick()})),a["\u0275\u0275elementStart"](1,"ion-label"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"ion-icon",20),a["\u0275\u0275elementEnd"]()}if(2&e){var r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("outline",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](r.selectedDefaultCategory)}}function P(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ion-chip",19),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"]().onSearchTagClick(e)})),a["\u0275\u0275elementStart"](1,"ion-label"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"ion-icon",20),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275property"]("outline",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](r)}}function O(e,t){1&e&&a["\u0275\u0275element"](0,"ion-progress-bar",25)}function M(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](3);return e.selectDefaultCategory(e.defaultCategories.topWeek)})),a["\u0275\u0275text"](1,"ver mais"),a["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](3).onUserClick(e.nickname)})),a["\u0275\u0275elementStart"](1,"ion-avatar",30),a["\u0275\u0275elementStart"](2,"img",31,32),a["\u0275\u0275listener"]("error",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-label"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("src",r.imageUrl,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.name)}}function S(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,M,2,0,"span",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",27),a["\u0275\u0275template"](6,k,6,2,"div",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.defaultCategories.topWeek),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.defaultCategoriesData||null==n.defaultCategoriesData.topWeek?null:n.defaultCategoriesData.topWeek.length)>=4),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.defaultCategoriesData.topWeek)}}function E(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](3);return e.selectDefaultCategory(e.defaultCategories.nearToYou)})),a["\u0275\u0275text"](1,"ver mais"),a["\u0275\u0275elementEnd"]()}}function D(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](3).onUserClick(e.nickname)})),a["\u0275\u0275elementStart"](1,"ion-avatar",30),a["\u0275\u0275elementStart"](2,"img",31,32),a["\u0275\u0275listener"]("error",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-label"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("src",r.imageUrl,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.name)}}function I(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,E,2,0,"span",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",27),a["\u0275\u0275template"](6,D,6,2,"div",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.defaultCategories.nearToYou),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.defaultCategoriesData||null==n.defaultCategoriesData.nearToYou?null:n.defaultCategoriesData.nearToYou.length)>=4),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.defaultCategoriesData.nearToYou)}}function V(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](3);return e.selectDefaultCategory(e.defaultCategories.likeYou)})),a["\u0275\u0275text"](1,"ver mais"),a["\u0275\u0275elementEnd"]()}}function T(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](3).onUserClick(e.nickname)})),a["\u0275\u0275elementStart"](1,"ion-avatar",30),a["\u0275\u0275elementStart"](2,"img",31,32),a["\u0275\u0275listener"]("error",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-label"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("src",r.imageUrl,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.name)}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,V,2,0,"span",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",27),a["\u0275\u0275template"](6,T,6,2,"div",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.defaultCategories.likeYou),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.defaultCategoriesData||null==n.defaultCategoriesData.likeYou?null:n.defaultCategoriesData.likeYou.length)>=4),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.defaultCategoriesData.likeYou)}}function A(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](3);return e.selectDefaultCategory(e.defaultCategories.likeYourFollows)})),a["\u0275\u0275text"](1,"ver mais"),a["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](3).onUserClick(e.nickname)})),a["\u0275\u0275elementStart"](1,"ion-avatar",30),a["\u0275\u0275elementStart"](2,"img",31,32),a["\u0275\u0275listener"]("error",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-label"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("src",r.imageUrl,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.name)}}function U(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,A,2,0,"span",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",27),a["\u0275\u0275template"](6,F,6,2,"div",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.defaultCategories.likeYourFollows),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.defaultCategoriesData||null==n.defaultCategoriesData.likeYourFollows?null:n.defaultCategoriesData.likeYourFollows.length)>=4),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.defaultCategoriesData.likeYourFollows)}}function Y(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](3);return e.selectDefaultCategory(e.defaultCategories.recent)})),a["\u0275\u0275text"](1,"ver mais"),a["\u0275\u0275elementEnd"]()}}function j(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](3).onUserClick(e.nickname)})),a["\u0275\u0275elementStart"](1,"ion-avatar",30),a["\u0275\u0275elementStart"](2,"img",31,32),a["\u0275\u0275listener"]("error",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-label"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("src",r.imageUrl,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.name)}}function $(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,Y,2,0,"span",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",27),a["\u0275\u0275template"](6,j,6,2,"div",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](n.defaultCategories.recent),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.defaultCategoriesData||null==n.defaultCategoriesData.recent?null:n.defaultCategoriesData.recent.length)>=4),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.defaultCategoriesData.recent)}}var z=function(e){return{show:e}};function W(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",21),a["\u0275\u0275template"](1,O,1,0,"ion-progress-bar",22),a["\u0275\u0275elementStart"](2,"div",23),a["\u0275\u0275template"](3,S,7,3,"section",24),a["\u0275\u0275template"](4,I,7,3,"section",24),a["\u0275\u0275template"](5,R,7,3,"section",24),a["\u0275\u0275template"](6,U,7,3,"section",24),a["\u0275\u0275template"](7,$,7,3,"section",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.loadingResults),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](7,z,n.defaultCategoriesData)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==n.defaultCategoriesData||null==n.defaultCategoriesData.topWeek?null:n.defaultCategoriesData.topWeek.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==n.defaultCategoriesData||null==n.defaultCategoriesData.nearToYou?null:n.defaultCategoriesData.nearToYou.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==n.defaultCategoriesData||null==n.defaultCategoriesData.likeYou?null:n.defaultCategoriesData.likeYou.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==n.defaultCategoriesData||null==n.defaultCategoriesData.likeYourFollows?null:n.defaultCategoriesData.likeYourFollows.length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==n.defaultCategoriesData||null==n.defaultCategoriesData.recent?null:n.defaultCategoriesData.recent.length)}}function L(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.$implicit;return a["\u0275\u0275nextContext"](2).onUserClick(e.nickname)})),a["\u0275\u0275elementStart"](1,"ion-avatar",30),a["\u0275\u0275elementStart"](2,"img",31,32),a["\u0275\u0275listener"]("error",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"ion-label"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("src",r.imageUrl,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](r.name)}}function X(e,t){1&e&&a["\u0275\u0275element"](0,"ion-progress-bar",25)}function G(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",35),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).loadMoreSearchResults()})),a["\u0275\u0275text"](1," Carregar mais "),a["\u0275\u0275elementEnd"]()}}function q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",33),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3,"Aqui est\xe3o seus resultados!"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",27),a["\u0275\u0275template"](5,L,6,2,"div",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,X,1,0,"ion-progress-bar",22),a["\u0275\u0275template"](7,G,2,0,"span",34),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",n.searchResults),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.loadingResults),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.loadingResults&&n.hasMore)}}var N,K,J=function(e){return{"autocomplete-active":e}},Q=function(e){return e.topWeek="Top semanal",e.nearToYou="Perto de voc\xea",e.likeYou="Nas suas categorias",e.likeYourFollows="Siga tamb\xe9m",e.recent="Visto por voc\xea",e}({}),H=((N=function(){function e(t,n,r,o){_classCallCheck(this,e),this._storageService=t,this._authService=n,this._navCtrl=r,this._trendsService=o,this.MAX_DATA_PER_PAGE=50,this.currentResultsPage=0,this.searchTagsChange=new i.a,this.searchTags=[],this.defaultCategories=Q,this.searchResults=[],this.loadingResults=!1,this.hasMore=!0,this.autocompleteChange=new a.EventEmitter}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._registerSearchListener();var t=this._authService.onLoggedChange.subscribe((function(n){t.unsubscribe(),e._loadLoggedUser();var r=e._loadResults().subscribe((function(){r.unsubscribe()}))}))}},{key:"ionViewDidEnter",value:function(){var e=this,t=this._loadResults().subscribe((function(){t.unsubscribe()})),n=this._storageService.loadData().subscribe((function(t){e.loggedUser=null==t?void 0:t.user,n.unsubscribe()}))}},{key:"ionViewDidLeave",value:function(){this.searchResults=[],this.defaultCategoriesData=void 0}},{key:"onAutocompleteClick",value:function(e,t){this.searchTags.push(e),this.searchTagsChange.next(),this.autocompletes=[],this.showAutocomplete=!1,t.value=""}},{key:"_loadAutocomplete",value:function(e){var t=this;return new c.a((function(n){t._trendsService.getAutocompletes(e).subscribe((function(e){var r;t.autocompletes=e,n.next(),n.complete(),t.showAutocomplete=(null===(r=t.autocompletes)||void 0===r?void 0:r.length)>0}))}))}},{key:"_loadLoggedUser",value:function(){var e=this,t=this._storageService.loadData().subscribe((function(n){e.loggedUser=null==n?void 0:n.user,t.unsubscribe()}))}},{key:"_registerSearchListener",value:function(){var e,t,n=this;(null===(e=this.searchTagsChange.observers)||void 0===e?void 0:e.length)<=0&&this.searchTagsChange.subscribe((function(e){n.searchResults=[],n.currentResultsPage=0;var t=n._loadResults().subscribe((function(){t.unsubscribe()}))})),(null===(t=this.autocompleteChange.observers)||void 0===t?void 0:t.length)<=0&&this.autocompleteChange.pipe(Object(l.a)(200)).subscribe((function(e){if((null==e?void 0:e.length)>0)var t=n._loadAutocomplete(e).subscribe((function(){t.unsubscribe()}))}))}},{key:"_loadResults",value:function(){var e=this;return new c.a((function(t){var n;if(e.loadingResults=!0,e.selectedDefaultCategory){var r=Object.entries(Q).find((function(t){return t[1]==e.selectedDefaultCategory}))[0];e._trendsService.searchWithDefaultCategory(r,e.searchTags,e.currentResultsPage,e.MAX_DATA_PER_PAGE).subscribe((function(n){e.searchResults=e.searchResults.concat(n),e.loadingResults=!1,e.hasMore=n.length>=e.MAX_DATA_PER_PAGE,t.next(),t.complete()}))}else(null===(n=e.searchTags)||void 0===n?void 0:n.length)?e._trendsService.search(e.searchTags,e.currentResultsPage,e.MAX_DATA_PER_PAGE).subscribe((function(n){e.searchResults=e.searchResults.concat(n),e.loadingResults=!1,e.hasMore=n.length>=e.MAX_DATA_PER_PAGE,t.next(),t.complete()})):e._trendsService.listDefaultCategories().subscribe((function(n){e.defaultCategoriesData=n,e.loadingResults=!1,t.next(),t.complete()}))}))}},{key:"onSearchChange",value:function(e){this.searchValue=e.target.value,this.autocompleteChange.next(this.searchValue)}},{key:"addSearchTag",value:function(e){var t,n=this,r=e.target;"13"==e.keyCode&&(this.showAutocomplete=!1,(null===(t=this.searchValue)||void 0===t?void 0:t.length)&&(this.searchTags.find((function(e){return e==n.searchValue}))?r.placeholder="Ops, voc\xea ja buscou por "+this.searchValue:(this.searchTags.push(this.searchValue),this.searchTagsChange.next(this.searchTags),r.placeholder="Digite para pesquisar"),this.searchValue="",r.value=""))}},{key:"onSearchTagClick",value:function(e){this.searchTags=this.searchTags.filter((function(t){return t!=e})),this.searchTagsChange.next(this.searchTags)}},{key:"showLogin",value:function(){this._navCtrl.navigateForward("/login",{queryParams:{redirectRoute:"/home/card"}})}},{key:"onDefaultCategoryTagClick",value:function(){this.selectedDefaultCategory=void 0}},{key:"selectDefaultCategory",value:function(e){var t=Object.entries(Q).find((function(t){return t[1]==e}))[0];this.selectedDefaultCategory=Q[t],this.searchResults=[],this.currentResultsPage=0,this.searchTagsChange.next()}},{key:"loadMoreSearchResults",value:function(){var e=this;this.loadingResults=!0,this.currentResultsPage=this.currentResultsPage+1,this._loadResults().subscribe((function(){e.loadingResults=!1}))}},{key:"onUserClick",value:function(e){this._navCtrl.navigateForward("/home/card",{queryParams:{userName:e}})}}]),e}()).\u0275fac=function(e){return new(e||N)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](d.M),a["\u0275\u0275directiveInject"](h))},N.\u0275cmp=a["\u0275\u0275defineComponent"]({type:N,selectors:[["app-search"]],decls:16,vars:13,consts:[[1,"content"],[1,"fixed"],[1,"header"],["class","welcome-message",4,"ngIf"],["src","assets/images/logo_full.png","width","32px","height","32px"],[1,"search"],["placeholder","Digite para pesquisar",3,"ngClass","ionChange","keydown"],["searchInput",""],[1,"autocomplete",3,"ngClass"],[3,"click",4,"ngFor","ngForOf"],[1,"chips"],[3,"outline","click",4,"ngIf"],[3,"outline","click",4,"ngFor","ngForOf"],["class","categories",4,"ngIf"],["class","search-results",4,"ngIf"],[1,"welcome-message"],[3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"outline","click"],["name","close"],[1,"categories"],["type","indeterminate","color","secondary",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["type","indeterminate","color","secondary"],[3,"click",4,"ngIf"],[1,"results"],["class","result",3,"click",4,"ngFor","ngForOf"],[1,"result",3,"click"],["slot","start"],[3,"src","error"],["profileImage",""],[1,"search-results"],["class","load-more",3,"click",4,"ngIf"],[1,"load-more",3,"click"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275template"](3,v,4,1,"div",3),a["\u0275\u0275template"](4,C,5,0,"div",3),a["\u0275\u0275element"](5,"img",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275elementStart"](7,"ion-input",6,7),a["\u0275\u0275listener"]("ionChange",(function(e){return t.onSearchChange(e)}))("keydown",(function(e){return t.addSearchTag(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",8),a["\u0275\u0275template"](10,y,7,5,"div",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",10),a["\u0275\u0275template"](12,w,4,2,"ion-chip",11),a["\u0275\u0275template"](13,P,4,2,"ion-chip",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,W,8,9,"div",13),a["\u0275\u0275template"](15,q,8,3,"div",14),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",t.loggedUser),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.loggedUser),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](9,J,t.showAutocomplete)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](11,z,t.showAutocomplete)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.autocompletes),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",t.selectedDefaultCategory),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.searchTags),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!t.searchTags.length&&!t.selectedDefaultCategory),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",t.searchTags.length||t.selectedDefaultCategory))},directives:[o.j,d.o,d.Q,o.h,o.i,o.l,o.m,d.f,d.q,d.n,d.u,d.c],styles:['[_ngcontent-%COMP%]:root{--container-width:100%;--container-max-width:600px;--background-color:#f0f0f0;--ion-font-family:"Montserrat";--ion-color-primary:#e73c73;--ion-color-primary-rgb:231,60,115;--ion-color-primary-contrast:#fff;--ion-color-primary-contrast-rgb:255,255,255;--ion-color-primary-shade:#cb3565;--ion-color-primary-tint:#e95081;--ion-color-secondary:#23a6d5;--ion-color-secondary-rgb:35,166,213;--ion-color-secondary-contrast:#000;--ion-color-secondary-contrast-rgb:0,0,0;--ion-color-secondary-shade:#1f92bb;--ion-color-secondary-tint:#39afd9;--ion-color-tertiary:#23d5ab;--ion-color-tertiary-rgb:35,213,171;--ion-color-tertiary-contrast:#000;--ion-color-tertiary-contrast-rgb:0,0,0;--ion-color-tertiary-shade:#1fbb96;--ion-color-tertiary-tint:#39d9b3;--ion-color-success:#23d5ab;--ion-color-success-rgb:35,213,171;--ion-color-success-contrast:#000;--ion-color-success-contrast-rgb:0,0,0;--ion-color-success-shade:#1fbb96;--ion-color-success-tint:#39d9b3;--ion-color-warning:#ee7752;--ion-color-warning-rgb:238,119,82;--ion-color-warning-contrast:#000;--ion-color-warning-contrast-rgb:0,0,0;--ion-color-warning-shade:#d16948;--ion-color-warning-tint:#f08563;--ion-color-danger:#ee7752;--ion-color-danger-rgb:238,119,82;--ion-color-danger-contrast:#000;--ion-color-danger-contrast-rgb:0,0,0;--ion-color-danger-shade:#d16948;--ion-color-danger-tint:#f08563;--ion-color-dark:#222428;--ion-color-dark-rgb:34,36,40;--ion-color-dark-contrast:#fff;--ion-color-dark-contrast-rgb:255,255,255;--ion-color-dark-shade:#1e2023;--ion-color-dark-tint:#383a3e;--ion-color-medium:#92949c;--ion-color-medium-rgb:146,148,156;--ion-color-medium-contrast:#fff;--ion-color-medium-contrast-rgb:255,255,255;--ion-color-medium-shade:#808289;--ion-color-medium-tint:#9d9fa6;--ion-color-light:#f4f5f8;--ion-color-light-rgb:244,245,248;--ion-color-light-contrast:#000;--ion-color-light-contrast-rgb:0,0,0;--ion-color-light-shade:#d7d8da;--ion-color-light-tint:#f5f6f9;--color-turquoise:#1abc9c;--color-emerland:#2ecc71;--color-peterriver:#3498db;--color-amethyst:#9b59b6;--color-wetasphalt:#34495e;--color-greensea:#16a085;--color-nephritis:#27ae60;--color-belizehole:#2980b9;--color-wisteria:#8e44ad;--color-midnightblue:#2c3e50;--color-sunflower:#f1c40f;--color-carrot:#e67e22;--color-alizarin:#e74c3c;--color-clouds:#ecf0f1;--color-concrete:#95a5a6;--color-orange:#f39c12;--color-pumpkin:#d35400;--color-pomegranate:#c0392b;--color-silver:#bdc3c7;--color-asbestos:#7f8c8d}.content[_ngcontent-%COMP%]{padding:12px 25px;flex:1;overflow:auto}.content[_ngcontent-%COMP%]   .sc-ion-input-ios-h.ios[_ngcontent-%COMP%]{--padding-start:10px!important}.content[_ngcontent-%COMP%]   .fixed[_ngcontent-%COMP%]{background-color:var(--background-color);position:sticky;top:-12px;padding-top:12px;margin:0 auto;width:var(--container-width);max-width:var(--container-max-width)}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;outline:none}@media only screen and (max-width:400px){.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;margin:0}}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;color:var(--ion-color-secondary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid #707070;border-radius:25px;transition:.3s;transition-delay:.4s}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   ion-input.autocomplete-active[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;border-bottom-color:transparent}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]{width:100%;height:-webkit-min-content;height:-moz-min-content;height:min-content;background-color:var(--background-color);max-height:0;overflow:hidden;pointer-events:none;transition:.5s;border-radius:25px;border-top-left-radius:0;border-top-right-radius:0;border:1px solid var(--background-color)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:48px;cursor:pointer;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:4px 20px;display:flex;justify-content:space-around;flex-direction:column;border-bottom:1px solid #d8d8d8}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete.show[_ngcontent-%COMP%]{border:1px solid #707070;border-top-color:transparent;max-height:200px;overflow:auto}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{margin:20px -25px 0;overflow-x:auto;white-space:nowrap}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin-bottom:12px}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:first-child{margin-left:25px}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+1){border-color:var(--ion-color-primary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+2){border-color:var(--ion-color-secondary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+3){border-color:var(--ion-color-tertiary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+4){border-color:var(--ion-color-warning)}.content[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;justify-content:flex-start}.content[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;text-align:center;width:70px;max-height:110px;overflow:hidden}.content[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:12px;font-size:12px}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:0;transition:1s}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div.show[_ngcontent-%COMP%]{opacity:1}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:22px}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:last-child   .results[_ngcontent-%COMP%]{border-bottom:none!important}.content[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{border-bottom:none}.content[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{margin:14px 0}.content[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:-12px -25px;height:64px;font-weight:700;text-transform:uppercase;cursor:pointer}']}),N),B=n("tyNb"),Z=((K=function e(){_classCallCheck(this,e)}).\u0275mod=a["\u0275\u0275defineNgModule"]({type:K}),K.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||K)},providers:[h],imports:[[o.b,d.I,B.j.forChild([{path:"",component:H}])]]}),K)}}]);