(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Aw9J:function(e,t,n){"use strict";n.r(t),n.d(t,"CardModule",(function(){return W}));var o=n("ofXK"),i=n("mrSG"),r=n("AytR"),c=n("tyNb"),a=n("mPDR"),s=n("fXoL"),l=n("TEn/"),d=n("uvxi"),g=n("2g2N"),p=n("J2Ij");const h=function(e){return{show:e}};let u=(()=>{class e{constructor(e,t,n){this._modalCtrl=e,this._cardService=t,this._toast=n,this.maxCategories=3,this.formIsValid=!1,this.showBackdrop=!1}ngOnInit(){this.getCard()}getCard(){this._cardService.get().subscribe(e=>{this.addressConfig=e.address},e=>{this._toast.showHttpError(e)})}onCategoriesChange(e){this.selectedCategoriesIds=e,this._checkFormValidity()}_checkFormValidity(){this.formIsValid=this.selectedCategoriesIds.length>0&&this.selectedCategoriesIds.length<=this.maxCategories}onDoneClick(){this._modalCtrl.dismiss({categoriesIds:this.selectedCategoriesIds,address:void 0})}openAddressConfig(){this._modalCtrl.create({component:a.a,componentProps:{address:this.addressConfig},cssClass:"modal-80-50-border"}).then(e=>{e.present(),this.showBackdrop=!0,e.onDidDismiss().then(e=>{this.showBackdrop=!1,console.log(e.data),e.data&&(this.addressConfig=e.data,this._cardService.updateAddress(this.addressConfig).subscribe(e=>e,e=>{this._toast.showHttpError(e)}))})})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l.L),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](g.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-welcome"]],inputs:{categoriesIDs:"categoriesIDs"},decls:17,vars:7,consts:[[1,"backdrop",3,"ngClass"],[1,"container"],[1,"header"],[1,"content"],[2,"font-weight","bold"],[2,"margin-bottom","12px","color","rgba(0, 0, 0, .6)"],["maxHeight","100%","minHeight","100%",3,"maxCategories","selectedCategoriesIds","onSelectionChange"],[1,"actions"],["expand","block",3,"disabled","click"]],template:function(e,t){1&e&&(s["\u0275\u0275element"](0,"div",0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275elementStart"](2,"div",2),s["\u0275\u0275elementStart"](3,"h2"),s["\u0275\u0275text"](4,"Bem vindo ao seu cart\xe3o!"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"span"),s["\u0275\u0275text"](6,"Agora vamos te ajudar a aparecer em nossas buscas! \u{1f609}"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",3),s["\u0275\u0275elementStart"](8,"section"),s["\u0275\u0275elementStart"](9,"ion-label",4),s["\u0275\u0275text"](10,"Suas categorias"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"small",5),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"categories-select",6),s["\u0275\u0275listener"]("onSelectionChange",(function(e){return t.onCategoriesChange(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",7),s["\u0275\u0275elementStart"](15,"ion-button",8),s["\u0275\u0275listener"]("click",(function(){return t.onDoneClick()})),s["\u0275\u0275text"](16,"Pronto"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](5,h,t.showBackdrop)),s["\u0275\u0275advance"](12),s["\u0275\u0275textInterpolate1"]("Selecione at\xe9 ",t.maxCategories," categorias para seu cart\xe3o"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("maxCategories",t.maxCategories)("selectedCategoriesIds",t.categoriesIDs),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("disabled",!t.formIsValid))},directives:[o.h,l.q,p.a,l.d],styles:["[_nghost-%COMP%]{background-color:var(--background-color)}[_nghost-%COMP%]   .backdrop[_ngcontent-%COMP%]{position:fixed;height:100vh;width:100vw;background-color:rgba(0,0,0,.4);z-index:3;pointer-events:none;opacity:0;transition:.3s}[_nghost-%COMP%]   .backdrop.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{height:100%;padding:0;max-width:unset;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:24px;height:128px;width:100%;background:linear-gradient(-45deg,#ee7752,#e73c7e,#23a6d5,#23d5ab);background-size:400% 400%;-webkit-animation:background-frames 10s ease-in-out infinite;animation:background-frames 10s ease-in-out infinite;color:#fff;display:flex;justify-content:center;flex-direction:column}@-webkit-keyframes background-frames{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}@keyframes background-frames{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-height:calc(100% - 210px);max-width:var(--container-max-width);width:var(--container-width);overflow-y:auto}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px 12px;border-bottom:1px solid rgba(0,0,0,.2)}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:last-child{border-bottom:none!important}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:0 24px;height:64px;bottom:0;background-color:var(--background-color);z-index:2;max-width:var(--container-max-width);width:var(--container-width)}"]}),e})();var m=n("tQGB"),C=n("qfBg"),f=n("/XPu"),v=n("3LUQ"),b=n("lGQG"),x=n("n90K"),_=n("Lr79"),P=n("8dox");function M(e,t){1&e&&s["\u0275\u0275element"](0,"ion-progress-bar",14)}const O=function(e){return{disabled:e}};function w(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-icon",15),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().type="list"})),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](1,O,e.loading))}}function y(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-icon",16),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().type="new"})),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](1,O,e.loading))}}function k(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-icon",17),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const t=s["\u0275\u0275nextContext"]();return(null==t.collectionName?null:t.collectionName.length)>=0?t.saveCollection():void 0})),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](1,O,!(null!=e.collectionName&&e.collectionName.length)||e.loading))}}function S(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"input",18),s["\u0275\u0275listener"]("input",(function(t){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"]().collectionName=t.target.value})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("disabled",e.loading)}}const I=function(e,t){return{disabled:e,saved:t}};function E(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",21),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275elementStart"](2,"span"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"small"),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"ion-icon",22),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).addToCollection(n.id)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](null!=e.cardsIds&&e.cardsIds.includes(n.cardId)?"Salvo nesta cole\xe7\xe3o, clique para remover":""),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("name",null!=e.cardsIds&&e.cardsIds.includes(n.cardId)?"star":"star-outline")("ngClass",s["\u0275\u0275pureFunction2"](4,I,n.loading,null==e.cardsIds?null:e.cardsIds.includes(n.cardId)))}}function j(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",19),s["\u0275\u0275template"](1,E,7,7,"div",20),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.collections)}}const B=function(e){return{show:e}};let V=(()=>{class e{constructor(e,t,n){this._tabsService=e,this._toastService=t,this._cardCollectionService=n,this.type="list",this.loading=!1}ngOnInit(){}open(){this.opened=!0,this._tabsService.toggleTabs(!1),this.loadCollections()}close(){this.opened=!1,this._tabsService.toggleTabs(!0),this.collections=void 0}loadCollections(){this.loading=!0,this._cardCollectionService.getAvailableCollections().subscribe(e=>{var t;this.collections=e,this.type=(null===(t=this.collections)||void 0===t?void 0:t.length)>0?"list":"new",this.loading=!1},e=>{this._toastService.showHttpError(e),this.loading=!1})}saveCollection(){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this._cardCollectionService.createCollection(this.collectionName).subscribe(e=>{this.collections.push(e),this.addToCollection(e.id)},e=>{this._toastService.showHttpError(e),this.loading=!1})}catch(e){this._toastService.showHttpError(e)}this.loading=!1}))}addToCollection(e){this.loading=!0;const t=this.collections.find(t=>t.id==e);this._cardCollectionService.toggleCardIntoCollection(e,this.cardId).subscribe(()=>{var e;this.loading=!1,this._toastService.show(`Cart\xe3o ${(null===(e=t.cardsIds)||void 0===e?void 0:e.includes(this.cardId))?"removido da":"salvo na"} lista ${t.name} \u{1f44f}.`),this.close()},e=>{this.loading=!1,this._toastService.showHttpError(e)})}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](_.a),s["\u0275\u0275directiveInject"](g.a),s["\u0275\u0275directiveInject"](P.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["card-collection-selector"]],inputs:{cardId:"cardId"},decls:16,vars:14,consts:[[1,"backdrop",3,"ngClass","click"],[1,"selector-container",3,"ngClass"],["type","indeterminate",4,"ngIf"],[1,"header"],[1,"left"],["name","arrow-back",3,"ngClass","click",4,"ngIf"],[1,"center"],[1,"right"],["name","add",3,"ngClass","click",4,"ngIf"],["name","checkmark-outline",3,"ngClass","click",4,"ngIf"],[1,"content"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","list",4,"ngSwitchCase"],["type","indeterminate"],["name","arrow-back",3,"ngClass","click"],["name","add",3,"ngClass","click"],["name","checkmark-outline",3,"ngClass","click"],["placeholder","Digite o nome para sua cole\xe7\xe3o",3,"disabled","input"],[1,"list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[3,"name","ngClass","click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275listener"]("click",(function(){return t.loading?void 0:t.close()})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275template"](2,M,1,0,"ion-progress-bar",2),s["\u0275\u0275elementStart"](3,"div",3),s["\u0275\u0275elementStart"](4,"div",4),s["\u0275\u0275template"](5,w,1,3,"ion-icon",5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",6),s["\u0275\u0275elementStart"](7,"span"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",7),s["\u0275\u0275template"](10,y,1,3,"ion-icon",8),s["\u0275\u0275template"](11,k,1,3,"ion-icon",9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"div",10),s["\u0275\u0275elementContainerStart"](13,11),s["\u0275\u0275template"](14,S,2,1,"div",12),s["\u0275\u0275template"](15,j,2,1,"div",13),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](10,B,t.opened)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](12,B,t.opened)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.loading),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf","new"==t.type),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"]("list"==t.type?"Cole\xe7\xf5es":"Nova cole\xe7\xe3o"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf","list"==t.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","new"==t.type),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngSwitch",t.type),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","new"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngSwitchCase","list"))},directives:[o.h,o.j,o.l,o.m,l.u,l.n,o.i],styles:[".backdrop[_ngcontent-%COMP%]{width:100%;height:100%;bottom:0;position:absolute;z-index:20;background-color:#000;opacity:0;overflow:hidden;pointer-events:none;transition:opacity .5s}.backdrop.show[_ngcontent-%COMP%]{max-height:100%;pointer-events:all;opacity:.4}.selector-container[_ngcontent-%COMP%]{overflow:hidden;max-height:0;width:100%;min-width:100%;height:40vh;transition:.3s;pointer-events:none;position:absolute;z-index:30;background-color:var(--background-color);bottom:0}.selector-container.show[_ngcontent-%COMP%]{max-height:50vh;pointer-events:all}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{top:0;height:42px;display:flex;align-items:center;position:relative;margin:12px 0 24px;padding:0 12px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{cursor:pointer;transition:.3s}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-icon.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-start;max-width:40px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-end;max-width:40px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 24px}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;border-bottom:1px solid rgba(0,0,0,.8);-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none;background-color:var(--background-color)}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:32px;width:100%;padding-bottom:12px;border-bottom:1px solid rgba(0,0,0,.3)}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;cursor:pointer;opacity:.8s;color:rgba(0,0,0,.4);transition:opacity .3s}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-icon.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-icon.saved[_ngcontent-%COMP%]{color:var(--ion-color-tertiary)}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px}"]}),e})();var z=n("uX3w"),F=n("RDGJ"),D=n("mtd2");function N(e,t){if(1&e&&s["\u0275\u0275element"](0,"base-toolbar",4),2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("showButtonBack",!0)("title",null==e.user?null:e.user.name)}}function $(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",20),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).showCardStatistics()})),s["\u0275\u0275elementStart"](1,"div",21),s["\u0275\u0275element"](2,"div",22),s["\u0275\u0275elementStart"](3,"div",23),s["\u0275\u0275elementStart"](4,"div",24),s["\u0275\u0275element"](5,"ion-icon",25),s["\u0275\u0275elementStart"](6,"span"),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"div",24),s["\u0275\u0275element"](9,"ion-icon",26),s["\u0275\u0275elementStart"](10,"span"),s["\u0275\u0275text"](11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](7),s["\u0275\u0275textInterpolate"](e.card.followersCount||0),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.card.viewsCount||0)}}function U(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).navCtrl.navigateForward("/icons-edit")})),s["\u0275\u0275text"](1,"Editar meu cart\xe3o"),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275styleProp"]("border-color",e.card.background.contrastColor)}}function T(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",27),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).toggleFollow()})),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275styleProp"]("border-color",e.card.background.contrastColor),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("",e.user.followedBy?"Deixar de seguir":"Seguir"," ")}}function A(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-button",28),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).share()})),s["\u0275\u0275element"](1,"ion-icon",29),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275styleProp"]("color",e.card.background.contrastColor)}}function L(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-button",28),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2),s["\u0275\u0275reference"](3).open()})),s["\u0275\u0275element"](1,"ion-icon",30),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275styleProp"]("color",e.card.background.contrastColor),s["\u0275\u0275property"]("name","star-outline")}}function H(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",31),s["\u0275\u0275elementStart"](1,"a",32),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](e);const n=t.$implicit;return s["\u0275\u0275nextContext"](2).goToLink(n.link)})),s["\u0275\u0275element"](2,"img",33),s["\u0275\u0275pipe"](3,"socialIcon"),s["\u0275\u0275elementStart"](4,"div",34),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("src",s["\u0275\u0275pipeBind1"](3,4,e.socialNetwork),s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](2),s["\u0275\u0275styleProp"]("color",n.card.background.contrastColor),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",e.title||e.socialNetwork.title,"")}}function R(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",35),s["\u0275\u0275elementStart"](1,"a",32),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275nextContext"](2).navCtrl.navigateForward("/icons-edit",{queryParams:{openAdd:1}})})),s["\u0275\u0275element"](2,"ion-icon",36),s["\u0275\u0275elementStart"](3,"div",34),s["\u0275\u0275text"](4,"Adicionar aplicativo"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275styleProp"]("border-color",e.card.background.contrastColor)("color",e.card.background.contrastColor),s["\u0275\u0275advance"](1),s["\u0275\u0275styleProp"]("color",e.card.background.contrastColor)}}const q=function(e){return{show:e}};function G(e,t){if(1&e){const e=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"base-content",5),s["\u0275\u0275element"](1,"div",6),s["\u0275\u0275template"](2,$,12,2,"div",7),s["\u0275\u0275elementStart"](3,"div",8),s["\u0275\u0275elementStart"](4,"img",9,10),s["\u0275\u0275listener"]("error",(function(){return s["\u0275\u0275restoreView"](e),s["\u0275\u0275reference"](5).src="../../../../../assets/images/default-avatar.png"})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",11),s["\u0275\u0275elementStart"](7,"div",12),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"div",13),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,U,2,2,"div",14),s["\u0275\u0275template"](12,T,2,3,"div",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",15),s["\u0275\u0275template"](14,A,2,2,"ion-button",16),s["\u0275\u0275template"](15,L,2,3,"ion-button",16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](16,"div",17),s["\u0275\u0275template"](17,H,6,6,"div",18),s["\u0275\u0275template"](18,R,5,6,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){const e=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("background",e.background)("backBackground",e.backBackgroundColor)("blur",e.blur)("showBackgroundOverlay",!0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](17,q,e.fabIsOpen)),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.isDesktop),s["\u0275\u0275advance"](1),s["\u0275\u0275styleProp"]("color",e.card.background.contrastColor),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("src",e.user.imageUrl,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.user.name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.user.bio),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.isMyCard),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.isMyCard&&null!=e.user.followedBy),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.isMyCard),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.isMyCard),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",e.icons),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e.isMyCard)}}let J=(()=>{class e{constructor(e,t,n,o,i,r,c,a,s,l,d,g,p,h){this.navCtrl=e,this._cardService=t,this._toast=n,this._browserService=o,this._userService=i,this._socialSharing=r,this._platform=c,this._alert=a,this._modal=s,this._router=l,this._authService=d,this._storageService=g,this._activatedRoute=p,this._popoverController=h,this.isMyCard=!0,this.isDesktop=!0,this.fabIsOpen=!1,this.background="rgb(255, 255, 255)",this.blur=0}ngOnInit(){this._router.events.subscribe(e=>{e instanceof c.c&&"/home/card"==e.url&&(this.user=null,this.card=null,this.getCard(()=>{this.defineBackground(),this.defineBlur(),this._userService.getLoggedUser().subscribe(e=>this.user=e),this.isMyCard=!0}))})}ionViewDidEnter(){const e=this._activatedRoute.snapshot.queryParams.userName;this.isMyCard=!e,this.user=null,this.card=null,this.isMyCard?(this.getCard(()=>{this.defineBackground(),this.defineBlur(),this.handleWelcomeModal()}),this._userService.getLoggedUser().subscribe(e=>this.user=e)):this._userService.getByNickname(e).subscribe(e=>{this._userService.getLoggedUser().subscribe(t=>{var n;this.user=e,this.user.followedBy=!!(null===(n=t.following)||void 0===n?void 0:n.find(e=>e.user==this.user.id)),this.card=e.card,this.defineBackground(),this.defineBlur(),this._cardService.registerView(this.card.id).subscribe(e=>e)})})}showCardStatistics(){var e;return Object(i.a)(this,void 0,void 0,(function*(){const t=null===(e=this.card.categories)||void 0===e?void 0:e.map(e=>e.name);yield this._alert.show({header:"\u{1f4d1} M\xe9tricas do cart\xe3o",cssClass:"modal-90-40",buttons:["Fechar"],message:`Seguidores: <b>${this.card.followersCount}</b>\n            <br>Acessos: <b>${this.card.viewsCount}</b>\n            <br>Acessos \xfanicos: <b>${this.card.uniqueViewsCount}</b>\n            <br><br>\n            #${t.map(e=>e.replace(" ","")).join("<br>#")}`})}))}toggleFollow(){this._userService.toggleFollow(this.user.id,!this.user.followedBy).subscribe(e=>{this.user.followedBy=!this.user.followedBy,this._storageService.dataSubject.next(this._storageService.data)})}handleWelcomeModal(){var e;(null===(e=this.card.categories)||void 0===e?void 0:e.length)<=0&&this._modal.create({component:u,backdropDismiss:!1,keyboardClose:!1,swipeToClose:!1,cssClass:"modal-100-100",componentProps:{categoriesIDs:this.card.categories.map(e=>e.id)}}).then(e=>{e.present(),e.onDidDismiss().then(e=>{this.card.categories=e.data.categoriesIds,this._cardService.updateCategories(e.data.categoriesIds).subscribe(e=>{})})})}getCard(e){this._cardService.get().subscribe(t=>{this.card=t,e&&e()},e=>{this._toast.showHttpError(e)})}defineBackground(){if(this.card.background.imageUrl)this.background=`url(${this.card.background.imageUrl})`;else if(this.card.background.colorRgb){const e=this.card.background.colorRgb;this.background=`rgb(${e[0]}, ${e[1]}, ${e[2]})`}this.backBackgroundColor=this.card.background.contrastColor.includes("#000")?"#fff":"#000"}defineBlur(){null!=this.card.background.blur&&(this.blur=this.card.background.blur)}share(){const e={title:this.user.name,text:this.user.bio,url:this.getUserCardUrl()};this._platform.is("cordova")?this._socialSharing.share(e.title,e.text,null,e.url):navigator.share?navigator.share(e):class{static copy(e){var t;return Object(i.a)(this,void 0,void 0,(function*(){const n=document.createElement("textarea");n.style.top="0",n.style.left="0",n.style.position="fixed",n.style.width="2em",n.style.height="2em",n.style.padding="0",n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",n.value=e,document.body.appendChild(n),n.focus(),n.select(),n.setSelectionRange(0,99999);let o=document.execCommand("copy");return document.body.removeChild(n),o||(yield null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText(e)),o}))}}.copy(e.url).then(e=>{this._toast.show(e?"Link copiado para sua \xe1rea de transfer\xeancia":"N\xe3o foi possivel compartilhar")})}goToLink(e){this._browserService.redirectToUrl(e)}get icons(){return this.card.icons.sort((e,t)=>e.position-t.position)}getUserCardUrl(){return`${r.a.publicAddress}/${this.user.nickname.replace(" ","")}`}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](l.M),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](g.a),s["\u0275\u0275directiveInject"](m.a),s["\u0275\u0275directiveInject"](C.a),s["\u0275\u0275directiveInject"](f.a),s["\u0275\u0275directiveInject"](l.N),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](l.L),s["\u0275\u0275directiveInject"](c.h),s["\u0275\u0275directiveInject"](b.a),s["\u0275\u0275directiveInject"](x.a),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](l.O))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["app-card"]],decls:4,vars:3,consts:[[3,"showButtonBack","title",4,"ngIf"],[3,"background","backBackground","blur","showBackgroundOverlay",4,"ngIf"],[3,"cardId"],["collectionSelector",""],[3,"showButtonBack","title"],[3,"background","backBackground","blur","showBackgroundOverlay"],[1,"overlay",3,"ngClass"],["class","status-bar",3,"click",4,"ngIf"],[1,"header"],[3,"src","error"],["profileImage",""],[1,"infos"],[1,"name"],[1,"bio"],["class","view",3,"borderColor","click",4,"ngIf"],[1,"share"],["size","small","fill","clear",3,"click",4,"ngIf"],[1,"icons-grid"],["class","icon",4,"ngFor","ngForOf"],["class","icon placeholder",4,"ngIf"],[1,"status-bar",3,"click"],[1,"container"],[1,"left-container"],[1,"right-container"],[1,"info"],["name","people-outline"],["name","eye-outline"],[1,"view",3,"click"],["size","small","fill","clear",3,"click"],["slot","icon-only","name","share-social"],["slot","icon-only",3,"name"],[1,"icon"],["href","javascript:;",3,"click"],[3,"src"],[1,"icon-title"],[1,"icon","placeholder"],["name","add-outline",1,"placeholder-icon"]],template:function(e,t){1&e&&(s["\u0275\u0275template"](0,N,1,2,"base-toolbar",0),s["\u0275\u0275template"](1,G,19,19,"base-content",1),s["\u0275\u0275element"](2,"card-collection-selector",2,3)),2&e&&(s["\u0275\u0275property"]("ngIf",!t.isMyCard),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.user&&t.card&&t.background),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("cardId",null==t.card?null:t.card.id))},directives:[o.j,V,z.a,F.a,o.h,o.i,l.n,l.d],pipes:[D.a],styles:[".overlay[_ngcontent-%COMP%]{position:absolute;height:0;width:0;background-color:rgba(0,0,0,.5);opacity:0;z-index:9998;transition:opacity .5s;pointer-events:none}.overlay.show[_ngcontent-%COMP%]{pointer-events:all;height:100vh;width:100vw;opacity:1}.status-bar[_ngcontent-%COMP%]{height:28px;background-color:rgba(0,0,0,.3);color:#fff;padding:0 16px;display:flex;align-items:center;justify-content:space-between;font-size:14px;cursor:pointer}.status-bar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-bottom:1px}.status-bar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:var(--container-width);max-width:var(--container-max-width);margin:0 auto;display:flex;justify-content:space-between}.status-bar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.status-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}@supports (-webkit-touch-callout:none){.status-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-right:12px!important}}.header[_ngcontent-%COMP%]{padding:25px 25px 0;width:var(--container-width);max-width:var(--container-max-width);margin:0 auto 8px;display:flex;cursor:pointer}@media (min-width:768px){.header[_ngcontent-%COMP%]{margin-bottom:24px}}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;margin-right:20px;-o-object-fit:cover;object-fit:cover;-o-object-position:center center;object-position:center center}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{width:calc(100% - 92px)}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;letter-spacing:.4px}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{font-size:12px;max-height:32px;overflow:hidden;margin-bottom:8px}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .view[_ngcontent-%COMP%]{border:1px solid;border-radius:6px;height:22px;font-size:12px;padding:0 12px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:6px;white-space:nowrap}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .view[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .share[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .share[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transform:scale(1.2)}.icons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);row-gap:12px;overflow-x:hidden;overflow-y:auto;width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}@media (min-width:768px){.icons-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}.icons-grid[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{opacity:.5}.icons-grid[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{border:2px dashed #fff;border-radius:10px;width:48px;height:48px}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{padding:5px;text-align:center}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%], .icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:58px;max-width:58px;margin-bottom:12px}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .icon-title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.2px;overflow:hidden;max-height:32px}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:flex;flex-direction:column;align-items:center}.menu-button[_ngcontent-%COMP%]{background:transparent;outline:none;left:16px;bottom:32px;position:fixed}.menu-button[_ngcontent-%COMP%], .menu-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:32px;width:32px}"]}),e})();var X=n("3Pt+"),Q=n("iTUp"),K=n("PCNd");let W=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.b,X.f,X.m,l.I,K.a,Q.a,c.j.forChild([{path:"",component:J}])]]}),e})()}}]);