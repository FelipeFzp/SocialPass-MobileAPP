(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{aeXx:function(e,t,n){"use strict";n.r(t),n.d(t,"SearchModule",(function(){return Q}));var o=n("ofXK"),r=n("fXoL"),a=n("XNiG"),i=n("HDdC"),s=n("Kj3r"),c=n("n90K"),l=n("lGQG"),d=n("TEn/"),g=n("d1Mt"),u=n("tk/3"),m=n("vCEr"),p=n("WLwD");let h=(()=>{class e{constructor(e,t,n){this._http=e,this._gpsService=t,this._ipService=n}search(e,t,n){return this._http.post(`${g.a.api.trends}/search/${t}/${n}`,{terms:e})}getAutocompletes(e){return this._http.post(g.a.api.trends+"/autocompletes",{term:e})}searchWithDefaultCategory(e,t,n,o){return new i.a(r=>{this._ipService.getIpv6().subscribe(a=>{var i,s;this._http.post(`${g.a.api.trends}/home/category/${e}/${n}/${o}`,{terms:t,clientAddress:a,coords:{latitude:null===(i=this._gpsService.coordinates)||void 0===i?void 0:i.latitude,longitude:null===(s=this._gpsService.coordinates)||void 0===s?void 0:s.longitude}}).subscribe(e=>{r.next(e),r.complete()},e=>{r.error(e)})})})}listDefaultCategories(){return new i.a(e=>{this._ipService.getIpv6().subscribe(t=>{var n,o;this._http.post(g.a.api.trends+"/home/categories",{clientAddress:t,coords:{latitude:null===(n=this._gpsService.coordinates)||void 0===n?void 0:n.latitude,longitude:null===(o=this._gpsService.coordinates)||void 0===o?void 0:o.longitude}}).subscribe(t=>{e.next(t),e.complete()},t=>{e.error(t)})})})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](u.b),r["\u0275\u0275inject"](m.a),r["\u0275\u0275inject"](p.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();function f(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275elementStart"](1,"b"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3," \xc9 bom ter voc\xea de volta! :)"),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("Oi ",e.loggedUser.name.split(" ")[0],"!")}}function C(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",15),r["\u0275\u0275elementStart"](1,"button"),r["\u0275\u0275elementStart"](2,"b",16),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().showLogin()})),r["\u0275\u0275text"](3,"Entre"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](4," para acessar o seu cart\xe3o!"),r["\u0275\u0275elementEnd"]()}}function v(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"small"),r["\u0275\u0275text"](1,"Nome de usu\xe1rio"),r["\u0275\u0275elementEnd"]())}function x(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"small"),r["\u0275\u0275text"](1,"Categoria"),r["\u0275\u0275elementEnd"]())}function _(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"small"),r["\u0275\u0275text"](1,"Rede social"),r["\u0275\u0275elementEnd"]())}function b(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit,o=r["\u0275\u0275nextContext"](),a=r["\u0275\u0275reference"](8);return o.onAutocompleteClick(n.label,a)})),r["\u0275\u0275elementStart"](1,"span"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerStart"](3,17),r["\u0275\u0275template"](4,v,2,0,"small",18),r["\u0275\u0275template"](5,x,2,0,"small",18),r["\u0275\u0275template"](6,_,2,0,"small",18),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.label),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitch",e.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","userName"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","category"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase","socialMedia")}}function w(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ion-chip",19),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"]().onDefaultCategoryTagClick()})),r["\u0275\u0275elementStart"](1,"ion-label"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](3,"ion-icon",20),r["\u0275\u0275elementEnd"]()}if(2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("outline",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e.selectedDefaultCategory)}}function P(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"ion-chip",19),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"]().onSearchTagClick(n)})),r["\u0275\u0275elementStart"](1,"ion-label"),r["\u0275\u0275text"](2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](3,"ion-icon",20),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275property"]("outline",!0),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](e)}}function M(e,t){1&e&&r["\u0275\u0275element"](0,"ion-progress-bar",25)}function O(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"](3);return t.selectDefaultCategory(t.defaultCategories.topWeek)})),r["\u0275\u0275text"](1,"ver mais"),r["\u0275\u0275elementEnd"]()}}function y(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).onUserClick(n.nickname)})),r["\u0275\u0275elementStart"](1,"ion-avatar",30),r["\u0275\u0275elementStart"](2,"img",31,32),r["\u0275\u0275listener"]("error",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-label"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("src",e.imageUrl,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.name)}}function S(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,O,2,0,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",27),r["\u0275\u0275template"](6,y,6,2,"div",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.defaultCategories.topWeek),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==e.defaultCategoriesData||null==e.defaultCategoriesData.topWeek?null:e.defaultCategoriesData.topWeek.length)>=4),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.defaultCategoriesData.topWeek)}}function k(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"](3);return t.selectDefaultCategory(t.defaultCategories.nearToYou)})),r["\u0275\u0275text"](1,"ver mais"),r["\u0275\u0275elementEnd"]()}}function E(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).onUserClick(n.nickname)})),r["\u0275\u0275elementStart"](1,"ion-avatar",30),r["\u0275\u0275elementStart"](2,"img",31,32),r["\u0275\u0275listener"]("error",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-label"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("src",e.imageUrl,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.name)}}function D(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,k,2,0,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",27),r["\u0275\u0275template"](6,E,6,2,"div",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.defaultCategories.nearToYou),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==e.defaultCategoriesData||null==e.defaultCategoriesData.nearToYou?null:e.defaultCategoriesData.nearToYou.length)>=4),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.defaultCategoriesData.nearToYou)}}function I(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"](3);return t.selectDefaultCategory(t.defaultCategories.likeYou)})),r["\u0275\u0275text"](1,"ver mais"),r["\u0275\u0275elementEnd"]()}}function V(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).onUserClick(n.nickname)})),r["\u0275\u0275elementStart"](1,"ion-avatar",30),r["\u0275\u0275elementStart"](2,"img",31,32),r["\u0275\u0275listener"]("error",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-label"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("src",e.imageUrl,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.name)}}function T(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,I,2,0,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",27),r["\u0275\u0275template"](6,V,6,2,"div",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.defaultCategories.likeYou),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==e.defaultCategoriesData||null==e.defaultCategoriesData.likeYou?null:e.defaultCategoriesData.likeYou.length)>=4),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.defaultCategoriesData.likeYou)}}function R(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"](3);return t.selectDefaultCategory(t.defaultCategories.likeYourFollows)})),r["\u0275\u0275text"](1,"ver mais"),r["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).onUserClick(n.nickname)})),r["\u0275\u0275elementStart"](1,"ion-avatar",30),r["\u0275\u0275elementStart"](2,"img",31,32),r["\u0275\u0275listener"]("error",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-label"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("src",e.imageUrl,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.name)}}function F(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,R,2,0,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",27),r["\u0275\u0275template"](6,A,6,2,"div",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.defaultCategories.likeYourFollows),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==e.defaultCategoriesData||null==e.defaultCategoriesData.likeYourFollows?null:e.defaultCategoriesData.likeYourFollows.length)>=4),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.defaultCategoriesData.likeYourFollows)}}function U(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const t=r["\u0275\u0275nextContext"](3);return t.selectDefaultCategory(t.defaultCategories.recent)})),r["\u0275\u0275text"](1,"ver mais"),r["\u0275\u0275elementEnd"]()}}function Y(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](3).onUserClick(n.nickname)})),r["\u0275\u0275elementStart"](1,"ion-avatar",30),r["\u0275\u0275elementStart"](2,"img",31,32),r["\u0275\u0275listener"]("error",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-label"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("src",e.imageUrl,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.name)}}function $(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](4,U,2,0,"span",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",27),r["\u0275\u0275template"](6,Y,6,2,"div",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.defaultCategories.recent),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",(null==e.defaultCategoriesData||null==e.defaultCategoriesData.recent?null:e.defaultCategoriesData.recent.length)>=4),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",e.defaultCategoriesData.recent)}}const j=function(e){return{show:e}};function z(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",21),r["\u0275\u0275template"](1,M,1,0,"ion-progress-bar",22),r["\u0275\u0275elementStart"](2,"div",23),r["\u0275\u0275template"](3,S,7,3,"section",24),r["\u0275\u0275template"](4,D,7,3,"section",24),r["\u0275\u0275template"](5,T,7,3,"section",24),r["\u0275\u0275template"](6,F,7,3,"section",24),r["\u0275\u0275template"](7,$,7,3,"section",24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.loadingResults),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](7,j,e.defaultCategoriesData)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.defaultCategoriesData||null==e.defaultCategoriesData.topWeek?null:e.defaultCategoriesData.topWeek.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.defaultCategoriesData||null==e.defaultCategoriesData.nearToYou?null:e.defaultCategoriesData.nearToYou.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.defaultCategoriesData||null==e.defaultCategoriesData.likeYou?null:e.defaultCategoriesData.likeYou.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.defaultCategoriesData||null==e.defaultCategoriesData.likeYourFollows?null:e.defaultCategoriesData.likeYourFollows.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null==e.defaultCategoriesData||null==e.defaultCategoriesData.recent?null:e.defaultCategoriesData.recent.length)}}function W(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"div",29),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](e);const n=t.$implicit;return r["\u0275\u0275nextContext"](2).onUserClick(n.nickname)})),r["\u0275\u0275elementStart"](1,"ion-avatar",30),r["\u0275\u0275elementStart"](2,"img",31,32),r["\u0275\u0275listener"]("error",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275reference"](3).src="../../../../../assets/images/default-avatar.png"})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"ion-label"),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("src",e.imageUrl,r["\u0275\u0275sanitizeUrl"]),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](e.name)}}function L(e,t){1&e&&r["\u0275\u0275element"](0,"ion-progress-bar",25)}function X(e,t){if(1&e){const e=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",35),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](e),r["\u0275\u0275nextContext"](2).loadMoreSearchResults()})),r["\u0275\u0275text"](1," Carregar mais "),r["\u0275\u0275elementEnd"]()}}function G(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",33),r["\u0275\u0275elementStart"](1,"div",2),r["\u0275\u0275elementStart"](2,"span"),r["\u0275\u0275text"](3,"Aqui est\xe3o seus resultados!"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"div",27),r["\u0275\u0275template"](5,W,6,2,"div",28),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,L,1,0,"ion-progress-bar",22),r["\u0275\u0275template"](7,X,2,0,"span",34),r["\u0275\u0275elementEnd"]()),2&e){const e=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",e.searchResults),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",e.loadingResults),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!e.loadingResults&&e.hasMore)}}const q=function(e){return{"autocomplete-active":e}};var N=function(e){return e.topWeek="Top semanal",e.nearToYou="Perto de voc\xea",e.likeYou="Nas suas categorias",e.likeYourFollows="Siga tamb\xe9m",e.recent="Visto por voc\xea",e}({});let K=(()=>{class e{constructor(e,t,n,o){this._storageService=e,this._authService=t,this._navCtrl=n,this._trendsService=o,this.MAX_DATA_PER_PAGE=50,this.currentResultsPage=0,this.searchTagsChange=new a.a,this.searchTags=[],this.defaultCategories=N,this.searchResults=[],this.loadingResults=!1,this.hasMore=!0,this.autocompleteChange=new r.EventEmitter}ngOnInit(){this._registerSearchListener();const e=this._authService.onLoggedChange.subscribe(t=>{e.unsubscribe(),this._loadLoggedUser();const n=this._loadResults().subscribe(()=>{n.unsubscribe()})})}ionViewDidEnter(){const e=this._loadResults().subscribe(()=>{e.unsubscribe()}),t=this._storageService.loadData().subscribe(e=>{this.loggedUser=null==e?void 0:e.user,t.unsubscribe()})}ionViewDidLeave(){this.searchResults=[],this.defaultCategoriesData=void 0}onAutocompleteClick(e,t){this.searchTags.push(e),this.searchTagsChange.next(),this.autocompletes=[],this.showAutocomplete=!1,t.value=""}_loadAutocomplete(e){return new i.a(t=>{this._trendsService.getAutocompletes(e).subscribe(e=>{var n;this.autocompletes=e,t.next(),t.complete(),this.showAutocomplete=(null===(n=this.autocompletes)||void 0===n?void 0:n.length)>0})})}_loadLoggedUser(){const e=this._storageService.loadData().subscribe(t=>{this.loggedUser=null==t?void 0:t.user,e.unsubscribe()})}_registerSearchListener(){var e,t;(null===(e=this.searchTagsChange.observers)||void 0===e?void 0:e.length)<=0&&this.searchTagsChange.subscribe(e=>{this.searchResults=[],this.currentResultsPage=0;const t=this._loadResults().subscribe(()=>{t.unsubscribe()})}),(null===(t=this.autocompleteChange.observers)||void 0===t?void 0:t.length)<=0&&this.autocompleteChange.pipe(Object(s.a)(200)).subscribe(e=>{if((null==e?void 0:e.length)>0){const t=this._loadAutocomplete(e).subscribe(()=>{t.unsubscribe()})}})}_loadResults(){return new i.a(e=>{var t;if(this.loadingResults=!0,this.selectedDefaultCategory){const t=Object.entries(N).find(e=>e[1]==this.selectedDefaultCategory)[0];this._trendsService.searchWithDefaultCategory(t,this.searchTags,this.currentResultsPage,this.MAX_DATA_PER_PAGE).subscribe(t=>{this.searchResults=this.searchResults.concat(t),this.loadingResults=!1,this.hasMore=t.length>=this.MAX_DATA_PER_PAGE,e.next(),e.complete()})}else(null===(t=this.searchTags)||void 0===t?void 0:t.length)?this._trendsService.search(this.searchTags,this.currentResultsPage,this.MAX_DATA_PER_PAGE).subscribe(t=>{this.searchResults=this.searchResults.concat(t),this.loadingResults=!1,this.hasMore=t.length>=this.MAX_DATA_PER_PAGE,e.next(),e.complete()}):this._trendsService.listDefaultCategories().subscribe(t=>{this.defaultCategoriesData=t,this.loadingResults=!1,e.next(),e.complete()})})}onSearchChange(e){this.searchValue=e.target.value,this.autocompleteChange.next(this.searchValue)}addSearchTag(e){var t;const n=e.target;"13"==e.keyCode&&(this.showAutocomplete=!1,(null===(t=this.searchValue)||void 0===t?void 0:t.length)&&(this.searchTags.find(e=>e==this.searchValue)?n.placeholder="Ops, voc\xea ja buscou por "+this.searchValue:(this.searchTags.push(this.searchValue),this.searchTagsChange.next(this.searchTags),n.placeholder="Digite para pesquisar"),this.searchValue="",n.value=""))}onSearchTagClick(e){this.searchTags=this.searchTags.filter(t=>t!=e),this.searchTagsChange.next(this.searchTags)}showLogin(){this._navCtrl.navigateForward("/login",{queryParams:{redirectRoute:"/home/card"}})}onDefaultCategoryTagClick(){this.selectedDefaultCategory=void 0}selectDefaultCategory(e){const t=Object.entries(N).find(t=>t[1]==e)[0];this.selectedDefaultCategory=N[t],this.searchResults=[],this.currentResultsPage=0,this.searchTagsChange.next()}loadMoreSearchResults(){this.loadingResults=!0,this.currentResultsPage=this.currentResultsPage+1,this._loadResults().subscribe(()=>{this.loadingResults=!1})}onUserClick(e){this._navCtrl.navigateForward("/home/card",{queryParams:{userName:e}})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](l.a),r["\u0275\u0275directiveInject"](d.M),r["\u0275\u0275directiveInject"](h))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-search"]],decls:16,vars:13,consts:[[1,"content"],[1,"fixed"],[1,"header"],["class","welcome-message",4,"ngIf"],["src","assets/images/logo_full.png","width","32px","height","32px"],[1,"search"],["placeholder","Digite para pesquisar",3,"ngClass","ionChange","keydown"],["searchInput",""],[1,"autocomplete",3,"ngClass"],[3,"click",4,"ngFor","ngForOf"],[1,"chips"],[3,"outline","click",4,"ngIf"],[3,"outline","click",4,"ngFor","ngForOf"],["class","categories",4,"ngIf"],["class","search-results",4,"ngIf"],[1,"welcome-message"],[3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"outline","click"],["name","close"],[1,"categories"],["type","indeterminate","color","secondary",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["type","indeterminate","color","secondary"],[3,"click",4,"ngIf"],[1,"results"],["class","result",3,"click",4,"ngFor","ngForOf"],[1,"result",3,"click"],["slot","start"],[3,"src","error"],["profileImage",""],[1,"search-results"],["class","load-more",3,"click",4,"ngIf"],[1,"load-more",3,"click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275template"](3,f,4,1,"div",3),r["\u0275\u0275template"](4,C,5,0,"div",3),r["\u0275\u0275element"](5,"img",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](6,"div",5),r["\u0275\u0275elementStart"](7,"ion-input",6,7),r["\u0275\u0275listener"]("ionChange",(function(e){return t.onSearchChange(e)}))("keydown",(function(e){return t.addSearchTag(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",8),r["\u0275\u0275template"](10,b,7,5,"div",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",10),r["\u0275\u0275template"](12,w,4,2,"ion-chip",11),r["\u0275\u0275template"](13,P,4,2,"ion-chip",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,z,8,9,"div",13),r["\u0275\u0275template"](15,G,8,3,"div",14),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.loggedUser),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.loggedUser),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](9,q,t.showAutocomplete)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction1"](11,j,t.showAutocomplete)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.autocompletes),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.selectedDefaultCategory),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.searchTags),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.searchTags.length&&!t.selectedDefaultCategory),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.searchTags.length||t.selectedDefaultCategory))},directives:[o.j,d.o,d.Q,o.h,o.i,o.l,o.m,d.f,d.q,d.n,d.u,d.c],styles:['[_ngcontent-%COMP%]:root{--container-width:100%;--container-max-width:600px;--background-color:#f0f0f0;--ion-font-family:"Montserrat";--ion-color-primary:#e73c73;--ion-color-primary-rgb:231,60,115;--ion-color-primary-contrast:#fff;--ion-color-primary-contrast-rgb:255,255,255;--ion-color-primary-shade:#cb3565;--ion-color-primary-tint:#e95081;--ion-color-secondary:#23a6d5;--ion-color-secondary-rgb:35,166,213;--ion-color-secondary-contrast:#000;--ion-color-secondary-contrast-rgb:0,0,0;--ion-color-secondary-shade:#1f92bb;--ion-color-secondary-tint:#39afd9;--ion-color-tertiary:#23d5ab;--ion-color-tertiary-rgb:35,213,171;--ion-color-tertiary-contrast:#000;--ion-color-tertiary-contrast-rgb:0,0,0;--ion-color-tertiary-shade:#1fbb96;--ion-color-tertiary-tint:#39d9b3;--ion-color-success:#23d5ab;--ion-color-success-rgb:35,213,171;--ion-color-success-contrast:#000;--ion-color-success-contrast-rgb:0,0,0;--ion-color-success-shade:#1fbb96;--ion-color-success-tint:#39d9b3;--ion-color-warning:#ee7752;--ion-color-warning-rgb:238,119,82;--ion-color-warning-contrast:#000;--ion-color-warning-contrast-rgb:0,0,0;--ion-color-warning-shade:#d16948;--ion-color-warning-tint:#f08563;--ion-color-danger:#ee7752;--ion-color-danger-rgb:238,119,82;--ion-color-danger-contrast:#000;--ion-color-danger-contrast-rgb:0,0,0;--ion-color-danger-shade:#d16948;--ion-color-danger-tint:#f08563;--ion-color-dark:#222428;--ion-color-dark-rgb:34,36,40;--ion-color-dark-contrast:#fff;--ion-color-dark-contrast-rgb:255,255,255;--ion-color-dark-shade:#1e2023;--ion-color-dark-tint:#383a3e;--ion-color-medium:#92949c;--ion-color-medium-rgb:146,148,156;--ion-color-medium-contrast:#fff;--ion-color-medium-contrast-rgb:255,255,255;--ion-color-medium-shade:#808289;--ion-color-medium-tint:#9d9fa6;--ion-color-light:#f4f5f8;--ion-color-light-rgb:244,245,248;--ion-color-light-contrast:#000;--ion-color-light-contrast-rgb:0,0,0;--ion-color-light-shade:#d7d8da;--ion-color-light-tint:#f5f6f9;--color-turquoise:#1abc9c;--color-emerland:#2ecc71;--color-peterriver:#3498db;--color-amethyst:#9b59b6;--color-wetasphalt:#34495e;--color-greensea:#16a085;--color-nephritis:#27ae60;--color-belizehole:#2980b9;--color-wisteria:#8e44ad;--color-midnightblue:#2c3e50;--color-sunflower:#f1c40f;--color-carrot:#e67e22;--color-alizarin:#e74c3c;--color-clouds:#ecf0f1;--color-concrete:#95a5a6;--color-orange:#f39c12;--color-pumpkin:#d35400;--color-pomegranate:#c0392b;--color-silver:#bdc3c7;--color-asbestos:#7f8c8d}.content[_ngcontent-%COMP%]{padding:12px 25px;flex:1;overflow:auto}.content[_ngcontent-%COMP%]   .sc-ion-input-ios-h.ios[_ngcontent-%COMP%]{--padding-start:10px!important}.content[_ngcontent-%COMP%]   .fixed[_ngcontent-%COMP%]{background-color:var(--background-color);position:sticky;top:-12px;padding-top:12px;margin:0 auto;width:var(--container-width);max-width:var(--container-max-width)}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;outline:none}@media only screen and (max-width:400px){.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .welcome-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;margin:0}}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;color:var(--ion-color-secondary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border:1px solid #707070;border-radius:25px;transition:.3s;transition-delay:.4s}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   ion-input.autocomplete-active[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;border-bottom-color:transparent}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]{width:100%;height:-webkit-min-content;height:-moz-min-content;height:min-content;background-color:var(--background-color);max-height:0;overflow:hidden;pointer-events:none;transition:.5s;border-radius:25px;border-top-left-radius:0;border-top-right-radius:0;border:1px solid var(--background-color)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:48px;cursor:pointer;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;user-select:none;padding:4px 20px;display:flex;justify-content:space-around;flex-direction:column;border-bottom:1px solid #d8d8d8}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .autocomplete.show[_ngcontent-%COMP%]{border:1px solid #707070;border-top-color:transparent;max-height:200px;overflow:auto}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]{margin:20px -25px 0;overflow-x:auto;white-space:nowrap}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin-bottom:12px}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:first-child{margin-left:25px}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+1){border-color:var(--ion-color-primary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+2){border-color:var(--ion-color-secondary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+3){border-color:var(--ion-color-tertiary)}.content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   .chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]:nth-child(4n+4){border-color:var(--ion-color-warning)}.content[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:24px;justify-content:flex-start}.content[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;text-align:center;width:70px;max-height:110px;overflow:hidden}.content[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:12px;font-size:12px}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{opacity:0;transition:1s}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div.show[_ngcontent-%COMP%]{opacity:1}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{margin-bottom:22px}.content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:last-child   .results[_ngcontent-%COMP%]{border-bottom:none!important}.content[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]{border-bottom:none}.content[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .results[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{margin:14px 0}.content[_ngcontent-%COMP%]   .search-results[_ngcontent-%COMP%]   .load-more[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:-12px -25px;height:64px;font-weight:700;text-transform:uppercase;cursor:pointer}']}),e})();var J=n("tyNb");let Q=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[h],imports:[[o.b,d.I,J.j.forChild([{path:"",component:K}])]]}),e})()}}]);