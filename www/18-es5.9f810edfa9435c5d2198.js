function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{s86I:function(e,t,n){"use strict";n.r(t),n.d(t,"IconsEditModule",(function(){return te}));var o=n("ofXK"),r=n("PCNd"),i=n("iTUp"),a=n("tyNb"),c=n("mrSG"),l=n("oaxI"),s=n("mPDR"),d=n("3Pt+"),u=n("ZQB6"),m=n("fXoL"),g=n("gIUt"),p=n("5dVO"),f=n("2g2N"),h=n("TEn/"),v=n("uvxi"),k=n("3LUQ"),b=n("qfBg"),w=n("odAe");function C(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-select-option",10),m["\u0275\u0275text"](1),m["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;m["\u0275\u0275property"]("value",n.id),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function x(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-item"),m["\u0275\u0275elementStart"](1,"ion-label",11),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"ion-input",14),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.selectedNetwork.placeholderPrefix),m["\u0275\u0275advance"](1),m["\u0275\u0275propertyInterpolate"]("placeholder",n.selectedNetwork.placeholderValue)}}function y(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-item"),m["\u0275\u0275elementStart"](1,"ion-label",15),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"ion-input",16),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](n.selectedNetwork.placeholderPrefix||"Link da rede social"),m["\u0275\u0275advance"](1),m["\u0275\u0275propertyInterpolate"]("placeholder",n.selectedNetwork.placeholderValue)}}function S(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"p",19),m["\u0275\u0275elementStart"](1,"b"),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](3,"br"),m["\u0275\u0275text"](4," Clique em Salvar para continuar \ud83d\ude09 "),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("Boa, o app ",n.selectedNetwork.title," foi configurado com sucesso!")}}function _(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",22),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](4).configureFromFacebook()})),m["\u0275\u0275element"](1,"ion-icon",23),m["\u0275\u0275text"](2," Configurar com Facebook "),m["\u0275\u0275elementEnd"]()}}function E(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",22),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](4).configureFromGoogle()})),m["\u0275\u0275element"](1,"ion-icon",24),m["\u0275\u0275text"](2," Configurar com Google "),m["\u0275\u0275elementEnd"]()}}function I(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"button",22),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](4).configureFromLinkedin()})),m["\u0275\u0275element"](1,"ion-icon",25),m["\u0275\u0275text"](2," Configurar com Linkedin "),m["\u0275\u0275elementEnd"]()}}function N(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275elementStart"](1,"p"),m["\u0275\u0275text"](2),m["\u0275\u0275element"](3,"br"),m["\u0275\u0275text"](4," Clique no bot\xe3o e fa\xe7a login normalmente."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"div",20),m["\u0275\u0275template"](6,_,3,0,"button",21),m["\u0275\u0275template"](7,E,3,0,"button",21),m["\u0275\u0275template"](8,I,3,0,"button",21),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](3);m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate1"]("N\xf3s podemos te ajudar a configurar o ",n.selectedNetwork.title," mais rapidamente! \ud83d\ude80 "),m["\u0275\u0275advance"](4),m["\u0275\u0275property"]("ngIf",n.socialNetworkIntegrations[n.selectedNetwork.key].hasFacebookIntegration),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.socialNetworkIntegrations[n.selectedNetwork.key].hasGoogleIntegration),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.socialNetworkIntegrations[n.selectedNetwork.key].hasLinkedinIntegration)}}function P(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",17),m["\u0275\u0275template"](1,S,5,1,"p",18),m["\u0275\u0275template"](2,N,9,4,"ng-container",5),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.socialNetworkAutoConfigured),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!n.socialNetworkAutoConfigured)}}function O(e,t){if(1&e&&(m["\u0275\u0275elementContainerStart"](0),m["\u0275\u0275template"](1,x,4,2,"ion-item",5),m["\u0275\u0275template"](2,y,4,2,"ion-item",5),m["\u0275\u0275elementStart"](3,"ion-item"),m["\u0275\u0275elementStart"](4,"ion-label",11),m["\u0275\u0275text"](5,"Escolha um nome para seu aplicativo"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](6,"ion-input",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](7,P,3,2,"div",13),m["\u0275\u0275elementContainerEnd"]()),2&e){var n=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",null==n.selectedNetwork?null:n.selectedNetwork.baseUrl),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!(null!=n.selectedNetwork&&n.selectedNetwork.baseUrl)),m["\u0275\u0275advance"](4),m["\u0275\u0275propertyInterpolate"]("placeholder",n.selectedNetwork.title),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",n.socialNetworkIntegrations[n.selectedNetwork.key]&&(null==n.platform?null:n.platform.isWeb))}}function F(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-grid"),m["\u0275\u0275elementStart"](1,"ion-row"),m["\u0275\u0275elementStart"](2,"ion-col",26),m["\u0275\u0275elementStart"](3,"ion-button",27),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().remove()})),m["\u0275\u0275text"](4," Excluir "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}var R,V,j=((R=function(){function e(t,n,o,r,i,a,c,l,s){_classCallCheck(this,e),this._socialNetworkService=t,this._loader=n,this._toast=o,this._modalCtrl=r,this._cardService=i,this._alertService=a,this._userService=c,this._activatedRoute=l,this.platform=s,this.socialNetworks=[],this.socialNetworkIntegrations={email:{hasGoogleIntegration:!0,hasFacebookIntegration:!0,hasLinkedinIntegration:!0}},this._socialMediaHelper=new u.a(this._userService),this.initForm()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.icon&&this.setForm(),this.getSocialNetworks((function(){e.verifySocialNetwork();var t=e._activatedRoute.snapshot.queryParams.code;t&&(e.selectedNetwork=e.socialNetworks.find((function(t){return t.key==e._activatedRoute.snapshot.queryParams.configuring})),e.iconForm.get("socialNetwork").setValue(e.selectedNetwork.id),e.configureFromLinkedin(t))}))}},{key:"initForm",value:function(){this.iconForm=new d.d({socialNetwork:new d.a(null,d.o.required),link:new d.a(null),nick:new d.a(null),title:new d.a(null)})}},{key:"setForm",value:function(){var e;this.iconForm.get("socialNetwork").setValue(this.icon.socialNetwork.id),this.iconForm.get("title").setValue(null===(e=this.icon)||void 0===e?void 0:e.title),this.icon.nick?this.iconForm.get("nick").setValue(this.icon.nick):this.iconForm.get("link").setValue(this.icon.link)}},{key:"verifySocialNetwork",value:function(){this.socialNetworkAutoConfigured=!1;var e=this.iconForm.get("socialNetwork");this.selectedNetwork=this.socialNetworks.find((function(t){return t.id==e.value})),this.selectedNetwork&&(this.selectedNetwork.baseUrl?this.iconForm.get("nick").setValidators(d.o.required):this.iconForm.get("link").setValidators(d.o.required))}},{key:"getSocialNetworks",value:function(e){var t=this;this._socialNetworkService.getAll().subscribe((function(n){t._loader.dismiss(),t.socialNetworks=n,e&&e()}),(function(e){t._toast.showHttpError(e)}))}},{key:"save",value:function(){var e,t,n=this,o={socialNetworkId:this.iconForm.get("socialNetwork").value,nick:this.iconForm.get("nick").value,link:this.iconForm.get("link").value,title:this.iconForm.get("title").value};this.icon?(o.key=this.icon.key,e=this._cardService.updateIcon(o),t="\xcdcone editado \ud83d\ude09"):(e=this._cardService.addIcon(o),t="\xcdcone adicionado \ud83d\ude03"),this._loader.show(),e.subscribe((function(e){n._loader.dismiss(),n._toast.show(t),n._modalCtrl.dismiss({ok:!0})}),(function(e){n._loader.dismiss(),n._toast.showHttpError(e)}))}},{key:"cancel",value:function(){this._modalCtrl.dismiss()}},{key:"remove",value:function(){var e=this;this._alertService.show({subHeader:"Tem certeza que deseja excluir?",buttons:[{text:"N\xe3o",role:"cancel"},{text:"Sim",cssClass:"danger",handler:function(){e._loader.show(),e._cardService.removeIcon(e.icon.key).subscribe((function(t){e._loader.dismiss(),e._toast.show("\xcdcone removido"),e._modalCtrl.dismiss({ok:!0})}),(function(t){e._loader.dismiss(),e._toast.showHttpError(t)}))}}]})}},{key:"configureFromFacebook",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._socialMediaHelper.loginWithFacebook();case 2:t=e.sent,e.t0=this.selectedNetwork.key,e.next="email"===e.t0?6:"facebook"===e.t0?8:9;break;case 6:return this.iconForm.get("nick").setValue(t.email),e.abrupt("break",9);case 8:this.iconForm.get("nick").setValue(t.link.replace("https://www.facebook.com/",""));case 9:this.socialNetworkAutoConfigured=!0;case 10:case"end":return e.stop()}}),e,this)})))}},{key:"configureFromGoogle",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._socialMediaHelper.loginWithGoogle();case 2:switch(t=e.sent,this.selectedNetwork.key){case"email":this.iconForm.get("nick").setValue(t.email)}this.socialNetworkAutoConfigured=!0;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"configureFromLinkedin",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._socialMediaHelper.loginWithLinkedin(e,this._getLinkedinRedirectUrl());case 2:switch(n=t.sent,this.selectedNetwork.key){case"email":this.iconForm.get("nick").setValue(n.email)}this.socialNetworkAutoConfigured=!0;case 5:case"end":return t.stop()}}),t,this)})))}},{key:"_getLinkedinRedirectUrl",value:function(){return"".concat(window.location.href.split("?")[0],"?configuring=").concat(this.selectedNetwork.key)}}]),e}()).\u0275fac=function(e){return new(e||R)(m["\u0275\u0275directiveInject"](g.a),m["\u0275\u0275directiveInject"](p.a),m["\u0275\u0275directiveInject"](f.a),m["\u0275\u0275directiveInject"](h.L),m["\u0275\u0275directiveInject"](v.a),m["\u0275\u0275directiveInject"](k.a),m["\u0275\u0275directiveInject"](b.a),m["\u0275\u0275directiveInject"](a.a),m["\u0275\u0275directiveInject"](w.a))},R.\u0275cmp=m["\u0275\u0275defineComponent"]({type:R,selectors:[["app-icon-edit"]],inputs:{icon:"icon"},decls:22,vars:5,consts:[[1,"title"],[3,"formGroup"],[2,"margin-bottom","150px"],["formControlName","socialNetwork","interface","action-sheet",3,"ionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"footer-bottom"],["size","6"],["color","primary","fill","outline","expand","block",3,"click"],["color","primary","expand","block",3,"click"],[3,"value"],["position","floating",2,"flex","1"],["type","text","maxlength","20","formControlName","title",3,"placeholder"],["class","integrations",4,"ngIf"],["formControlName","nick",3,"placeholder"],["position","floating"],["formControlName","link",3,"placeholder"],[1,"integrations"],["class","success",4,"ngIf"],[1,"success"],[1,"buttons"],["class","outline-button",3,"click",4,"ngIf"],[1,"outline-button",3,"click"],["name","logo-facebook"],["name","logo-google"],["name","logo-linkedin"],[2,"padding-bottom","0"],["color","danger","fill","outline","size","small","expand","block",2,"margin-bottom","0",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-content"),m["\u0275\u0275elementStart"](1,"ion-title",0),m["\u0275\u0275text"](2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"form",1),m["\u0275\u0275elementStart"](4,"ion-list",2),m["\u0275\u0275elementStart"](5,"ion-item"),m["\u0275\u0275elementStart"](6,"ion-label"),m["\u0275\u0275text"](7,"Selecione um aplicativo"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"ion-select",3),m["\u0275\u0275listener"]("ionChange",(function(){return t.verifySocialNetwork()})),m["\u0275\u0275template"](9,C,2,2,"ion-select-option",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](10,O,8,4,"ng-container",5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"ion-footer",6),m["\u0275\u0275template"](12,F,5,0,"ion-grid",5),m["\u0275\u0275elementStart"](13,"ion-toolbar"),m["\u0275\u0275elementStart"](14,"ion-grid"),m["\u0275\u0275elementStart"](15,"ion-row"),m["\u0275\u0275elementStart"](16,"ion-col",7),m["\u0275\u0275elementStart"](17,"ion-button",8),m["\u0275\u0275listener"]("click",(function(){return t.cancel()})),m["\u0275\u0275text"](18," Cancelar "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"ion-col",7),m["\u0275\u0275elementStart"](20,"ion-button",9),m["\u0275\u0275listener"]("click",(function(){return t.save()})),m["\u0275\u0275text"](21," Salvar "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](t.icon?t.icon.socialNetwork.title:"Novo aplicativo"),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",t.iconForm),m["\u0275\u0275advance"](6),m["\u0275\u0275property"]("ngForOf",t.socialNetworks),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.selectedNetwork),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",t.icon))},directives:[h.h,h.G,d.p,d.l,d.e,h.r,h.p,h.q,h.A,h.P,d.k,d.c,o.i,o.j,h.k,h.H,h.l,h.z,h.g,h.d,h.B,h.o,h.Q,d.g,h.n],styles:[".integrations[_ngcontent-%COMP%]{padding:24px 12px}.integrations[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{letter-spacing:.4px}.integrations[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:var(--ion-color-tertiary)}.integrations[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:32px;display:flex;flex-direction:column;align-items:center;gap:12px}.integrations[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-family:montserrat;background-color:transparent;color:#414141;border:1px solid #414141;padding:0 1.1em;border-radius:4px;height:36px;display:flex;gap:8px;align-items:center;justify-content:center}"]}),R),M=n("a/9d"),B=n("hwGQ"),T=n("uX3w"),A=n("RDGJ"),q=n("J2Ij"),H=((V=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")}}]),e}()).\u0275fac=function(e){return new(e||V)},V.\u0275pipe=m["\u0275\u0275definePipe"]({name:"cssRbg",type:V,pure:!0}),V),L=n("mtd2"),U=["imageInput"];function z(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-button",13),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).getPicture({fromGallery:!0})})),m["\u0275\u0275text"](1," Imagem "),m["\u0275\u0275elementEnd"]()}}function G(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-button",13),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](),m["\u0275\u0275reference"](11).click()})),m["\u0275\u0275text"](1," Imagem "),m["\u0275\u0275elementEnd"]()}}function D(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",26),m["\u0275\u0275pipe"](1,"cssRbg"),m["\u0275\u0275elementEnd"]()),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275styleProp"]("background",m["\u0275\u0275pipeBind1"](1,2,n.background.rgbColor),m["\u0275\u0275defaultStyleSanitizer"])}}var Q=function(e){return{filter:e}};function J(e,t){if(1&e&&m["\u0275\u0275element"](0,"img",27),2&e){var n=m["\u0275\u0275nextContext"](2);m["\u0275\u0275property"]("src",n.background.image.url,m["\u0275\u0275sanitizeUrl"])("ngStyle",m["\u0275\u0275pureFunction1"](2,Q,"blur("+.5*n.card.background.blur+"px)"))}}function W(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"div",6),m["\u0275\u0275elementStart"](1,"div",7),m["\u0275\u0275elementStart"](2,"ion-button",28),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"](2).updateBackground()})),m["\u0275\u0275text"](3," Atualizar "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}}function X(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-item",29),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](n);var e=t.$implicit;return m["\u0275\u0275nextContext"](2).openIcon(e)})),m["\u0275\u0275element"](1,"img",30),m["\u0275\u0275pipe"](2,"socialIcon"),m["\u0275\u0275elementStart"](3,"ion-label"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"ion-reorder",31),m["\u0275\u0275element"](6,"ion-icon",32),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("src",m["\u0275\u0275pipeBind1"](2,2,o.socialNetwork),m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate"](o.title||o.socialNetwork.title)}}var $=function(e){return{color:e}};function K(e,t){if(1&e){var n=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"base-content"),m["\u0275\u0275elementStart"](1,"div",5),m["\u0275\u0275elementStart"](2,"div",6),m["\u0275\u0275elementStart"](3,"div",7),m["\u0275\u0275elementStart"](4,"ion-label",8),m["\u0275\u0275text"](5,"Plano de fundo"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"div",6),m["\u0275\u0275elementStart"](7,"div",9),m["\u0275\u0275template"](8,z,2,0,"ion-button",10),m["\u0275\u0275template"](9,G,2,0,"ion-button",10),m["\u0275\u0275elementStart"](10,"input",11,12),m["\u0275\u0275listener"]("change",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().onImageSelected(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](12,"ion-button",13),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275reference"](15).click()})),m["\u0275\u0275text"](13," Cor s\xf3lida "),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](14,"input",14,15),m["\u0275\u0275listener"]("change",(function(){m["\u0275\u0275restoreView"](n);var e=m["\u0275\u0275reference"](15);return m["\u0275\u0275nextContext"]().colorBackgroundChanged(e.value)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](16,"div",16),m["\u0275\u0275template"](17,D,2,4,"div",17),m["\u0275\u0275template"](18,J,1,4,"img",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](19,"div",6),m["\u0275\u0275elementStart"](20,"div",7),m["\u0275\u0275elementStart"](21,"ion-label",8),m["\u0275\u0275text"](22,"Nivel de desfoque"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](23,"ion-range",19),m["\u0275\u0275listener"]("ionChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().updateBlur(e.target.value)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](24,W,4,0,"div",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](25,"div",5),m["\u0275\u0275elementStart"](26,"div",6),m["\u0275\u0275elementStart"](27,"ion-label",8),m["\u0275\u0275text"](28,"Seu endere\xe7o"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](29,"small"),m["\u0275\u0275text"](30,"Essa informa\xe7\xe3o n\xe3o ser\xe1 divulgada, mas ser\xe1 utilizada nos nossos mecanismos de buscas."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](31,"div",6),m["\u0275\u0275elementStart"](32,"div",21),m["\u0275\u0275listener"]("click",(function(){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().openAddressConfig()})),m["\u0275\u0275text"](33),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](34,"div",5),m["\u0275\u0275elementStart"](35,"div",6),m["\u0275\u0275elementStart"](36,"ion-label",8),m["\u0275\u0275text"](37,"Suas categorias"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](38,"small"),m["\u0275\u0275text"](39,"Voc\xea pode selecionar at\xe9 3 categorias que ser\xe3o utilizadas nos nossos mecanismos de buscas."),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](40,"div",6),m["\u0275\u0275elementStart"](41,"categories-select",22),m["\u0275\u0275listener"]("onSelectionChange",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().updateCategories(e)})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](42,"div",23),m["\u0275\u0275elementStart"](43,"div",6),m["\u0275\u0275elementStart"](44,"div",7),m["\u0275\u0275elementStart"](45,"ion-label",8),m["\u0275\u0275text"](46,"\xcdcones"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](47,"div",6),m["\u0275\u0275elementStart"](48,"div",7),m["\u0275\u0275elementStart"](49,"ion-reorder-group",24),m["\u0275\u0275listener"]("ionItemReorder",(function(e){return m["\u0275\u0275restoreView"](n),m["\u0275\u0275nextContext"]().reorder(e)})),m["\u0275\u0275template"](50,X,7,4,"ion-item",25),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){var o=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",o.isCordova),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!o.isCordova),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngIf",o.background.rgbColor),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o.background.image.url),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("pin",!0)("ticks",!0)("debounce",500)("value",o.card.background.blur),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",o.showButtonBgUpdate),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("ngStyle",m["\u0275\u0275pureFunction1"](13,$,null!=o.addressConfig&&o.addressConfig.description?"#000":"#9f9f9f")),m["\u0275\u0275advance"](1),m["\u0275\u0275textInterpolate1"](" ",(null==o.addressConfig?null:o.addressConfig.description)||"Ex.: Av. Julio de Castilhos"," "),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("selectedCategoriesIds",o.categoriesIds),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("ngForOf",o.icons)}}var Y,Z,ee=((Z=function(){function e(t,n,o,r,i,a,c,l,s,d){_classCallCheck(this,e),this._cardService=t,this._loader=n,this._toast=o,this._modalCtrl=r,this._activatedRoute=i,this._platform=a,this.appPlatform=c,this._navCtrl=l,this._camera=s,this._crop=d,this.background={rgbColor:null,image:{file:null,url:""}},this.isCordova=this._platform.is("cordova")}return _createClass(e,[{key:"ngOnInit",value:function(){this.getCard(),(this._activatedRoute.snapshot.queryParams.openAdd||this._activatedRoute.snapshot.queryParams.configuring)&&this.openIcon()}},{key:"getCard",value:function(){var e=this;this._cardService.get().subscribe((function(t){e.card=t,e.categoriesIds=e.card.categories.map((function(e){return e.id})),e.addressConfig=e.card.address,e.card.background.colorRgb?(e.background.rgbColor=e.card.background.colorRgb,e.background.image.file=null,e.background.image.url=null):(e.background.rgbColor=null,e.background.image.url=e.card.background.imageUrl,e.background.image.file=null)}),(function(t){e._toast.showHttpError(t)}))}},{key:"updateCategories",value:function(e){this._cardService.updateCategories(e).subscribe((function(e){return e}))}},{key:"openAddressConfig",value:function(){var e=this;this._modalCtrl.create({component:s.a,componentProps:{address:this.addressConfig},cssClass:"modal-40-80"}).then((function(t){t.present(),t.onDidDismiss().then((function(t){console.log(t.data),t.data&&(e.addressConfig=t.data,e._cardService.updateAddress(e.addressConfig).subscribe((function(e){return e}),(function(t){e._toast.showHttpError(t)})))}))}))}},{key:"reorder",value:function(e){var t=this;e.detail.complete(),this._cardService.updateOrder(e.detail).subscribe((function(e){t.card.icons=e,console.log(t.card.icons.map((function(e){return"".concat(e.position," - ").concat(e.socialNetwork.title)})))}),(function(e){t._toast.showHttpError(e)}))}},{key:"colorBackgroundChanged",value:function(e){var t=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"hexToRgb",value:function(e){return(e=e.replace("#","")).match(new RegExp("(.{"+e.length/3+"})","g")).map((function(t){return parseInt(e.length%2?t+t:t,16)}))}}]),e}().hexToRgb(e);this.background.rgbColor=t,this.background.image.file=null,this.background.image.url=null}},{key:"getCameraOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{quality:50,destinationType:this._camera.DestinationType.FILE_URI,encodingType:this._camera.EncodingType.JPEG,mediaType:this._camera.MediaType.PICTURE,correctOrientation:!0,sourceType:e.fromGallery?this._camera.PictureSourceType.PHOTOLIBRARY:this._camera.PictureSourceType.CAMERA,targetWidth:400,targetHeight:400}}},{key:"getPicture",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isCordova?(this._loader.show(),this._camera.getPicture(this.getCameraOptions(t)).then((function(t){l.a.cordovaFilePathToFile(t).then((function(t){l.a.fileToBase64(t).then((function(n){e.background.image.url=n,l.a.fileToBlob(t).then((function(t){e.background.image.file=t,e._loader.dismiss()}))}))}))})).catch((function(t){e._loader.dismiss(),e._toast.show("Algo errado...")}))):this.fileInput.nativeElement.click()}},{key:"onImageSelected",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.target.files&&e.target.files.length>0&&(n=e.target.files[0],l.a.fileToBase64(n).then((function(e){return Object(c.a)(o,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.background.image.file=n,this.background.image.url=e,this.background.rgbColor=null,this.fileInput.nativeElement.value=null;case 1:case"end":return t.stop()}}),t,this)})))})));case 1:case"end":return t.stop()}}),t)})))}},{key:"updateBlur",value:function(e){var t=this;console.log(e),this._cardService.setBlur(e).subscribe((function(n){t.card.background.blur=e}),(function(e){t._toast.showHttpError(e)}))}},{key:"updateBackground",value:function(){var e=this;this._loader.show(),this._cardService.setBackground(this.background.rgbColor||this.background.image.file).subscribe((function(t){e._loader.dismiss(),e.getCard()}),(function(t){e._loader.dismiss(),console.log(t),e._toast.showHttpError(t)}))}},{key:"openIcon",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._modalCtrl.create({component:j,componentProps:{icon:e},cssClass:"modal-40-80"});case 2:(n=t.sent).onDidDismiss().then((function(e){e.data&&e.data.ok&&o.getCard()})),n.present();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"icons",get:function(){return this.card?this.card.icons.sort((function(e,t){return e.position-t.position})):[]}},{key:"showButtonBgUpdate",get:function(){return this.card.background.colorRgb?this.background.rgbColor!=this.card.background.colorRgb:this.background.image.url!=this.card.background.imageUrl}}]),e}()).\u0275fac=function(e){return new(e||Z)(m["\u0275\u0275directiveInject"](v.a),m["\u0275\u0275directiveInject"](p.a),m["\u0275\u0275directiveInject"](f.a),m["\u0275\u0275directiveInject"](h.L),m["\u0275\u0275directiveInject"](a.a),m["\u0275\u0275directiveInject"](h.N),m["\u0275\u0275directiveInject"](w.a),m["\u0275\u0275directiveInject"](h.M),m["\u0275\u0275directiveInject"](M.a),m["\u0275\u0275directiveInject"](B.a))},Z.\u0275cmp=m["\u0275\u0275defineComponent"]({type:Z,selectors:[["app-icons-edit"]],viewQuery:function(e,t){var n;1&e&&m["\u0275\u0275viewQuery"](U,!0),2&e&&m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.fileInput=n.first)},decls:5,vars:2,consts:[["title","Configura\xe7\xf5es","buttonBackRoute","/home/card",3,"showButtonBack"],[4,"ngIf"],["slot","fixed",1,"btn-add"],[3,"click"],["name","add"],[1,"section"],[1,"row"],[1,"col"],[2,"font-weight","bold"],["size","7",1,"col"],["size","small","color","primary","fill","outline","expand","block",3,"click",4,"ngIf"],["type","file","accept","image/*","hidden","",3,"change"],["imageInput",""],["size","small","color","primary","fill","outline","expand","block",3,"click"],["type","color",2,"display","none",3,"change"],["bgColor",""],["size","5",1,"col"],["class","bg-color",3,"background",4,"ngIf"],["class","bg-image",3,"src","ngStyle",4,"ngIf"],["min","0","max","10",1,"blur-level-range",3,"pin","ticks","debounce","value","ionChange"],["class","row",4,"ngIf"],[2,"margin-bottom","-5px",3,"ngStyle","click"],[3,"selectedCategoriesIds","onSelectionChange"],[1,"section",2,"margin-bottom","100px"],["disabled","false",3,"ionItemReorder"],["class","icon-item",3,"click",4,"ngFor","ngForOf"],[1,"bg-color"],[1,"bg-image",3,"src","ngStyle"],["size","small","color","primary","expand","block",3,"click"],[1,"icon-item",3,"click"],[3,"src"],["slot","end"],["name","reorder-three-outline"]],template:function(e,t){1&e&&(m["\u0275\u0275element"](0,"base-toolbar",0),m["\u0275\u0275template"](1,K,51,15,"base-content",1),m["\u0275\u0275elementStart"](2,"ion-fab",2),m["\u0275\u0275elementStart"](3,"ion-fab-button",3),m["\u0275\u0275listener"]("click",(function(){return t.openIcon()})),m["\u0275\u0275element"](4,"ion-icon",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275property"]("showButtonBack",!0),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.card))},directives:[T.a,o.j,h.i,h.j,h.n,A.a,h.q,h.d,h.v,h.P,o.k,q.a,h.x,o.i,h.p,h.w],pipes:[H,L.a],styles:["base-content[_ngcontent-%COMP%]{width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}base-content[_ngcontent-%COMP%]     .content{overflow:auto;display:flex;flex-direction:column;gap:24px;padding:24px 20px}  ion-item .item-native, base-content[_ngcontent-%COMP%]     .content{background-color:var(--background-color)}.icon-item[_ngcontent-%COMP%]{cursor:pointer}.icon-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:15px;margin-right:6px}.bg-color[_ngcontent-%COMP%]{width:100%;height:60px}.bg-image[_ngcontent-%COMP%]{max-width:100%;max-height:80px}.btn-add[_ngcontent-%COMP%]{position:fixed;bottom:15px;right:15px}.blur-level-range[_ngcontent-%COMP%]{padding:0 12px}ion-reorder-group[_ngcontent-%COMP%]{background-color:var(--background-color)}ion-item[_ngcontent-%COMP%]{--border-color:transparent;--background:var(--background-color)}.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column}.section[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{margin-bottom:4px}"]}),Z),te=((Y=function e(){_classCallCheck(this,e)}).\u0275mod=m["\u0275\u0275defineNgModule"]({type:Y}),Y.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Y)},imports:[[o.b,r.a,d.m,i.a,a.j.forChild([{path:"",component:ee}])]]}),Y)}}]);