function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{Aw9J:function(e,t,n){"use strict";n.r(t),n.d(t,"CardModule",(function(){return te}));var o,i=n("ofXK"),r=n("mrSG"),a=n("AytR"),c=n("tyNb"),s=n("mPDR"),l=n("fXoL"),d=n("TEn/"),g=n("uvxi"),u=n("2g2N"),p=n("J2Ij"),m=function(e){return{show:e}},h=((o=function(){function e(t,n,o){_classCallCheck(this,e),this._modalCtrl=t,this._cardService=n,this._toast=o,this.maxCategories=3,this.formIsValid=!1,this.showBackdrop=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getCard()}},{key:"getCard",value:function(){var e=this;this._cardService.get().subscribe((function(t){e.addressConfig=t.address}),(function(t){e._toast.showHttpError(t)}))}},{key:"onCategoriesChange",value:function(e){this.selectedCategoriesIds=e,this._checkFormValidity()}},{key:"_checkFormValidity",value:function(){this.formIsValid=this.selectedCategoriesIds.length>0&&this.selectedCategoriesIds.length<=this.maxCategories}},{key:"onDoneClick",value:function(){this._modalCtrl.dismiss({categoriesIds:this.selectedCategoriesIds,address:void 0})}},{key:"openAddressConfig",value:function(){var e=this;this._modalCtrl.create({component:s.a,componentProps:{address:this.addressConfig},cssClass:"modal-80-50-border"}).then((function(t){t.present(),e.showBackdrop=!0,t.onDidDismiss().then((function(t){e.showBackdrop=!1,console.log(t.data),t.data&&(e.addressConfig=t.data,e._cardService.updateAddress(e.addressConfig).subscribe((function(e){return e}),(function(t){e._toast.showHttpError(t)})))}))}))}}]),e}()).\u0275fac=function(e){return new(e||o)(l["\u0275\u0275directiveInject"](d.L),l["\u0275\u0275directiveInject"](g.a),l["\u0275\u0275directiveInject"](u.a))},o.\u0275cmp=l["\u0275\u0275defineComponent"]({type:o,selectors:[["app-welcome"]],inputs:{categoriesIDs:"categoriesIDs"},decls:17,vars:7,consts:[[1,"backdrop",3,"ngClass"],[1,"container"],[1,"header"],[1,"content"],[2,"font-weight","bold"],[2,"margin-bottom","12px","color","rgba(0, 0, 0, .6)"],["maxHeight","100%","minHeight","100%",3,"maxCategories","selectedCategoriesIds","onSelectionChange"],[1,"actions"],["expand","block",3,"disabled","click"]],template:function(e,t){1&e&&(l["\u0275\u0275element"](0,"div",0),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275elementStart"](3,"h2"),l["\u0275\u0275text"](4,"Bem vindo ao seu cart\xe3o!"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](5,"span"),l["\u0275\u0275text"](6,"Agora vamos te ajudar a aparecer em nossas buscas! \ud83d\ude09"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",3),l["\u0275\u0275elementStart"](8,"section"),l["\u0275\u0275elementStart"](9,"ion-label",4),l["\u0275\u0275text"](10,"Suas categorias"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"small",5),l["\u0275\u0275text"](12),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"categories-select",6),l["\u0275\u0275listener"]("onSelectionChange",(function(e){return t.onCategoriesChange(e)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](14,"div",7),l["\u0275\u0275elementStart"](15,"ion-button",8),l["\u0275\u0275listener"]("click",(function(){return t.onDoneClick()})),l["\u0275\u0275text"](16,"Pronto"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](5,m,t.showBackdrop)),l["\u0275\u0275advance"](12),l["\u0275\u0275textInterpolate1"]("Selecione at\xe9 ",t.maxCategories," categorias para seu cart\xe3o"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("maxCategories",t.maxCategories)("selectedCategoriesIds",t.categoriesIDs),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("disabled",!t.formIsValid))},directives:[i.h,d.q,p.a,d.d],styles:["[_nghost-%COMP%]{background-color:var(--background-color)}[_nghost-%COMP%]   .backdrop[_ngcontent-%COMP%]{position:fixed;height:100vh;width:100vw;background-color:rgba(0,0,0,.4);z-index:3;pointer-events:none;opacity:0;transition:.3s}[_nghost-%COMP%]   .backdrop.show[_ngcontent-%COMP%]{pointer-events:all;opacity:1}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{height:100%;padding:0;max-width:unset;display:flex;flex-direction:column;align-items:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{padding:24px;height:128px;width:100%;background:linear-gradient(-45deg,#ee7752,#e73c7e,#23a6d5,#23d5ab);background-size:400% 400%;-webkit-animation:background-frames 10s ease-in-out infinite;animation:background-frames 10s ease-in-out infinite;color:#fff;display:flex;justify-content:center;flex-direction:column}@-webkit-keyframes background-frames{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}@keyframes background-frames{0%{background-position:0 50%}50%{background-position:100% 50%}to{background-position:0 50%}}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{max-height:calc(100% - 210px);max-width:var(--container-max-width);width:var(--container-width);overflow-y:auto}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px 12px;border-bottom:1px solid rgba(0,0,0,.2)}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]:last-child{border-bottom:none!important}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:rgba(0,0,0,.6)}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:0 24px;height:64px;bottom:0;background-color:var(--background-color);z-index:2;max-width:var(--container-max-width);width:var(--container-width)}"]}),o),C=n("tQGB"),f=n("qfBg"),v=n("/XPu"),_=n("3LUQ"),b=n("lGQG"),x=n("n90K"),P=n("Lr79"),M=n("8dox");function O(e,t){1&e&&l["\u0275\u0275element"](0,"ion-progress-bar",14)}var w=function(e){return{disabled:e}};function k(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-icon",15),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().type="list"})),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](1,w,o.loading))}}function y(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-icon",16),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().type="new"})),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](1,w,o.loading))}}function S(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-icon",17),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=l["\u0275\u0275nextContext"]();return(null==e.collectionName?null:e.collectionName.length)>=0?e.saveCollection():void 0})),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](1,w,!(null!=o.collectionName&&o.collectionName.length)||o.loading))}}function I(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div"),l["\u0275\u0275elementStart"](1,"input",18),l["\u0275\u0275listener"]("input",(function(e){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().collectionName=e.target.value})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("disabled",o.loading)}}var E=function(e,t){return{disabled:e,saved:t}};function j(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",21),l["\u0275\u0275elementStart"](1,"div"),l["\u0275\u0275elementStart"](2,"span"),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"small"),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"ion-icon",22),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).addToCollection(e.id)})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](o.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](null!=o.cardsIds&&o.cardsIds.includes(i.cardId)?"Salvo nesta cole\xe7\xe3o, clique para remover":""),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("name",null!=o.cardsIds&&o.cardsIds.includes(i.cardId)?"star":"star-outline")("ngClass",l["\u0275\u0275pureFunction2"](4,E,i.loading,null==o.cardsIds?null:o.cardsIds.includes(i.cardId)))}}function B(e,t){if(1&e&&(l["\u0275\u0275elementStart"](0,"div",19),l["\u0275\u0275template"](1,j,7,7,"div",20),l["\u0275\u0275elementEnd"]()),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",n.collections)}}var V,z=function(e){return{show:e}},F=((V=function(){function e(t,n,o){_classCallCheck(this,e),this._tabsService=t,this._toastService=n,this._cardCollectionService=o,this.type="list",this.loading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"open",value:function(){this.opened=!0,this._tabsService.toggleTabs(!1),this.loadCollections()}},{key:"close",value:function(){this.opened=!1,this._tabsService.toggleTabs(!0),this.collections=void 0}},{key:"loadCollections",value:function(){var e=this;this.loading=!0,this._cardCollectionService.getAvailableCollections().subscribe((function(t){var n;e.collections=t,e.type=(null===(n=e.collections)||void 0===n?void 0:n.length)>0?"list":"new",e.loading=!1}),(function(t){e._toastService.showHttpError(t),e.loading=!1}))}},{key:"saveCollection",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loading=!0;try{this._cardCollectionService.createCollection(this.collectionName).subscribe((function(e){t.collections.push(e),t.addToCollection(e.id)}),(function(e){t._toastService.showHttpError(e),t.loading=!1}))}catch(n){this._toastService.showHttpError(n)}this.loading=!1;case 3:case"end":return e.stop()}}),e,this)})))}},{key:"addToCollection",value:function(e){var t=this;this.loading=!0;var n=this.collections.find((function(t){return t.id==e}));this._cardCollectionService.toggleCardIntoCollection(e,this.cardId).subscribe((function(){var e;t.loading=!1,t._toastService.show("Cart\xe3o ".concat((null===(e=n.cardsIds)||void 0===e?void 0:e.includes(t.cardId))?"removido da":"salvo na"," lista ").concat(n.name," \ud83d\udc4f.")),t.close()}),(function(e){t.loading=!1,t._toastService.showHttpError(e)}))}}]),e}()).\u0275fac=function(e){return new(e||V)(l["\u0275\u0275directiveInject"](P.a),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](M.a))},V.\u0275cmp=l["\u0275\u0275defineComponent"]({type:V,selectors:[["card-collection-selector"]],inputs:{cardId:"cardId"},decls:16,vars:14,consts:[[1,"backdrop",3,"ngClass","click"],[1,"selector-container",3,"ngClass"],["type","indeterminate",4,"ngIf"],[1,"header"],[1,"left"],["name","arrow-back",3,"ngClass","click",4,"ngIf"],[1,"center"],[1,"right"],["name","add",3,"ngClass","click",4,"ngIf"],["name","checkmark-outline",3,"ngClass","click",4,"ngIf"],[1,"content"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","list",4,"ngSwitchCase"],["type","indeterminate"],["name","arrow-back",3,"ngClass","click"],["name","add",3,"ngClass","click"],["name","checkmark-outline",3,"ngClass","click"],["placeholder","Digite o nome para sua cole\xe7\xe3o",3,"disabled","input"],[1,"list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[3,"name","ngClass","click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275listener"]("click",(function(){return t.loading?void 0:t.close()})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](1,"div",1),l["\u0275\u0275template"](2,O,1,0,"ion-progress-bar",2),l["\u0275\u0275elementStart"](3,"div",3),l["\u0275\u0275elementStart"](4,"div",4),l["\u0275\u0275template"](5,k,1,3,"ion-icon",5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",6),l["\u0275\u0275elementStart"](7,"span"),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",7),l["\u0275\u0275template"](10,y,1,3,"ion-icon",8),l["\u0275\u0275template"](11,S,1,3,"ion-icon",9),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](12,"div",10),l["\u0275\u0275elementContainerStart"](13,11),l["\u0275\u0275template"](14,I,2,1,"div",12),l["\u0275\u0275template"](15,B,2,1,"div",13),l["\u0275\u0275elementContainerEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](10,z,t.opened)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](12,z,t.opened)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.loading),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngIf","new"==t.type),l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"]("list"==t.type?"Cole\xe7\xf5es":"Nova cole\xe7\xe3o"),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf","list"==t.type),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf","new"==t.type),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngSwitch",t.type),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase","new"),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngSwitchCase","list"))},directives:[i.h,i.j,i.l,i.m,d.u,d.n,i.i],styles:[".backdrop[_ngcontent-%COMP%]{width:100%;height:100%;bottom:0;position:absolute;z-index:20;background-color:#000;opacity:0;overflow:hidden;pointer-events:none;transition:opacity .5s}.backdrop.show[_ngcontent-%COMP%]{max-height:100%;pointer-events:all;opacity:.4}.selector-container[_ngcontent-%COMP%]{overflow:hidden;max-height:0;width:100%;min-width:100%;height:40vh;transition:.3s;pointer-events:none;position:absolute;z-index:30;background-color:var(--background-color);bottom:0}.selector-container.show[_ngcontent-%COMP%]{max-height:50vh;pointer-events:all}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{top:0;height:42px;display:flex;align-items:center;position:relative;margin:12px 0 24px;padding:0 12px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{cursor:pointer;transition:.3s}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   ion-icon.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.3}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-start;max-width:40px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:flex-end;max-width:40px}.selector-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 24px}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:none;border-bottom:1px solid rgba(0,0,0,.8);-webkit-user-select:none;-moz-user-select:none;user-select:none;outline:none;background-color:var(--background-color)}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{opacity:.6}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:32px;width:100%;padding-bottom:12px;border-bottom:1px solid rgba(0,0,0,.3)}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;cursor:pointer;opacity:.8s;color:rgba(0,0,0,.4);transition:opacity .3s}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-icon.disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-icon.saved[_ngcontent-%COMP%]{color:var(--ion-color-tertiary)}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selector-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px}"]}),V),D=n("uX3w"),N=n("RDGJ"),U=n("mtd2");function T(e,t){if(1&e&&l["\u0275\u0275element"](0,"base-toolbar",4),2&e){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("showButtonBack",!0)("title",null==n.user?null:n.user.name)}}function A(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",20),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).showCardStatistics()})),l["\u0275\u0275elementStart"](1,"div",21),l["\u0275\u0275element"](2,"div",22),l["\u0275\u0275elementStart"](3,"div",23),l["\u0275\u0275elementStart"](4,"div",24),l["\u0275\u0275element"](5,"ion-icon",25),l["\u0275\u0275elementStart"](6,"span"),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"div",24),l["\u0275\u0275element"](9,"ion-icon",26),l["\u0275\u0275elementStart"](10,"span"),l["\u0275\u0275text"](11),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](7),l["\u0275\u0275textInterpolate"](o.card.followersCount||0),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](o.card.viewsCount||0)}}function R(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",27),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).navCtrl.navigateForward("/icons-edit")})),l["\u0275\u0275text"](1,"Editar meu cart\xe3o"),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275styleProp"]("border-color",o.card.background.contrastColor)}}function L(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",27),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).toggleFollow()})),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275styleProp"]("border-color",o.card.background.contrastColor),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"]("",o.user.followedBy?"Deixar de seguir":"Seguir"," ")}}function H(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-button",28),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).share()})),l["\u0275\u0275element"](1,"ion-icon",29),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275styleProp"]("color",o.card.background.contrastColor)}}function q(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"ion-button",28),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2),l["\u0275\u0275reference"](3).open()})),l["\u0275\u0275element"](1,"ion-icon",30),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](1),l["\u0275\u0275styleProp"]("color",o.card.background.contrastColor),l["\u0275\u0275property"]("name","star-outline")}}function G(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",31),l["\u0275\u0275elementStart"](1,"a",32),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var e=t.$implicit;return l["\u0275\u0275nextContext"](2).goToLink(e.link)})),l["\u0275\u0275element"](2,"img",33),l["\u0275\u0275pipe"](3,"socialIcon"),l["\u0275\u0275elementStart"](4,"div",34),l["\u0275\u0275text"](5),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var o=t.$implicit,i=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("src",l["\u0275\u0275pipeBind1"](3,4,o.socialNetwork),l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](2),l["\u0275\u0275styleProp"]("color",i.card.background.contrastColor),l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",o.title||o.socialNetwork.title,"")}}function J(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"div",35),l["\u0275\u0275elementStart"](1,"a",32),l["\u0275\u0275listener"]("click",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"](2).navCtrl.navigateForward("/icons-edit",{queryParams:{openAdd:1}})})),l["\u0275\u0275element"](2,"ion-icon",36),l["\u0275\u0275elementStart"](3,"div",34),l["\u0275\u0275text"](4,"Adicionar aplicativo"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"](2);l["\u0275\u0275advance"](2),l["\u0275\u0275styleProp"]("border-color",o.card.background.contrastColor)("color",o.card.background.contrastColor),l["\u0275\u0275advance"](1),l["\u0275\u0275styleProp"]("color",o.card.background.contrastColor)}}var X=function(e){return{show:e}};function $(e,t){if(1&e){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"base-content",5),l["\u0275\u0275element"](1,"div",6),l["\u0275\u0275template"](2,A,12,2,"div",7),l["\u0275\u0275elementStart"](3,"div",8),l["\u0275\u0275elementStart"](4,"img",9,10),l["\u0275\u0275listener"]("error",(function(){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275reference"](5).src="../../../../../assets/images/default-avatar.png"})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](6,"div",11),l["\u0275\u0275elementStart"](7,"div",12),l["\u0275\u0275text"](8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](9,"div",13),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](11,R,2,2,"div",14),l["\u0275\u0275template"](12,L,2,3,"div",14),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"div",15),l["\u0275\u0275template"](14,H,2,2,"ion-button",16),l["\u0275\u0275template"](15,q,2,3,"ion-button",16),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](16,"div",17),l["\u0275\u0275template"](17,G,6,6,"div",18),l["\u0275\u0275template"](18,J,5,6,"div",19),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}if(2&e){var o=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("background",o.background)("backBackground",o.backBackgroundColor)("blur",o.blur)("showBackgroundOverlay",!0),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](17,X,o.fabIsOpen)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.isDesktop),l["\u0275\u0275advance"](1),l["\u0275\u0275styleProp"]("color",o.card.background.contrastColor),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("src",o.user.imageUrl,l["\u0275\u0275sanitizeUrl"]),l["\u0275\u0275advance"](4),l["\u0275\u0275textInterpolate"](o.user.name),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate"](o.user.bio),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.isMyCard),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!o.isMyCard&&null!=o.user.followedBy),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngIf",o.isMyCard),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",!o.isMyCard),l["\u0275\u0275advance"](2),l["\u0275\u0275property"]("ngForOf",o.icons),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",o.isMyCard)}}var Q,K,W=((Q=function(){function e(t,n,o,i,r,a,c,s,l,d,g,u,p,m){_classCallCheck(this,e),this.navCtrl=t,this._cardService=n,this._toast=o,this._browserService=i,this._userService=r,this._socialSharing=a,this._platform=c,this._alert=s,this._modal=l,this._router=d,this._authService=g,this._storageService=u,this._activatedRoute=p,this._popoverController=m,this.isMyCard=!0,this.isDesktop=!0,this.fabIsOpen=!1,this.background="rgb(255, 255, 255)",this.blur=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this._router.events.subscribe((function(t){t instanceof c.c&&"/home/card"==t.url&&(e.user=null,e.card=null,e.getCard((function(){e.defineBackground(),e.defineBlur(),e._userService.getLoggedUser().subscribe((function(t){return e.user=t})),e.isMyCard=!0})))}))}},{key:"ionViewDidEnter",value:function(){var e=this,t=this._activatedRoute.snapshot.queryParams.userName;this.isMyCard=!t,this.user=null,this.card=null,this.isMyCard?(this.getCard((function(){e.defineBackground(),e.defineBlur(),e.handleWelcomeModal()})),this._userService.getLoggedUser().subscribe((function(t){return e.user=t}))):this._userService.getByNickname(t).subscribe((function(t){e._userService.getLoggedUser().subscribe((function(n){var o;e.user=t,e.user.followedBy=!!(null===(o=n.following)||void 0===o?void 0:o.find((function(t){return t.user==e.user.id}))),e.card=t.card,e.defineBackground(),e.defineBlur(),e._cardService.registerView(e.card.id).subscribe((function(e){return e}))}))}))}},{key:"showCardStatistics",value:function(){var e;return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null===(e=this.card.categories)||void 0===e?void 0:e.map((function(e){return e.name})),t.next=3,this._alert.show({header:"\ud83d\udcd1 M\xe9tricas do cart\xe3o",cssClass:"modal-90-40",buttons:["Fechar"],message:"Seguidores: <b>".concat(this.card.followersCount,"</b>\n            <br>Acessos: <b>").concat(this.card.viewsCount,"</b>\n            <br>Acessos \xfanicos: <b>").concat(this.card.uniqueViewsCount,"</b>\n            <br><br>\n            #").concat(n.map((function(e){return e.replace(" ","")})).join("<br>#"))});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"toggleFollow",value:function(){var e=this;this._userService.toggleFollow(this.user.id,!this.user.followedBy).subscribe((function(t){e.user.followedBy=!e.user.followedBy,e._storageService.dataSubject.next(e._storageService.data)}))}},{key:"handleWelcomeModal",value:function(){var e,t=this;(null===(e=this.card.categories)||void 0===e?void 0:e.length)<=0&&this._modal.create({component:h,backdropDismiss:!1,keyboardClose:!1,swipeToClose:!1,cssClass:"modal-100-100",componentProps:{categoriesIDs:this.card.categories.map((function(e){return e.id}))}}).then((function(e){e.present(),e.onDidDismiss().then((function(e){t.card.categories=e.data.categoriesIds,t._cardService.updateCategories(e.data.categoriesIds).subscribe((function(e){}))}))}))}},{key:"getCard",value:function(e){var t=this;this._cardService.get().subscribe((function(n){t.card=n,e&&e()}),(function(e){t._toast.showHttpError(e)}))}},{key:"defineBackground",value:function(){if(this.card.background.imageUrl)this.background="url(".concat(this.card.background.imageUrl,")");else if(this.card.background.colorRgb){var e=this.card.background.colorRgb;this.background="rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")}this.backBackgroundColor=this.card.background.contrastColor.includes("#000")?"#fff":"#000"}},{key:"defineBlur",value:function(){null!=this.card.background.blur&&(this.blur=this.card.background.blur)}},{key:"share",value:function(){var e={title:this.user.name,text:this.user.bio,url:this.getUserCardUrl()};this._platform.is("cordova")?this._socialSharing.share(e.title,e.text,null,e.url):navigator.share&&navigator.share(e)}},{key:"goToLink",value:function(e){this._browserService.redirectToUrl(e)}},{key:"icons",get:function(){return this.card.icons.sort((function(e,t){return e.position-t.position}))}},{key:"getUserCardUrl",value:function(){return"".concat(a.a.publicAddress,"/").concat(this.user.nickname.replace(" ",""))}}]),e}()).\u0275fac=function(e){return new(e||Q)(l["\u0275\u0275directiveInject"](d.M),l["\u0275\u0275directiveInject"](g.a),l["\u0275\u0275directiveInject"](u.a),l["\u0275\u0275directiveInject"](C.a),l["\u0275\u0275directiveInject"](f.a),l["\u0275\u0275directiveInject"](v.a),l["\u0275\u0275directiveInject"](d.N),l["\u0275\u0275directiveInject"](_.a),l["\u0275\u0275directiveInject"](d.L),l["\u0275\u0275directiveInject"](c.h),l["\u0275\u0275directiveInject"](b.a),l["\u0275\u0275directiveInject"](x.a),l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](d.O))},Q.\u0275cmp=l["\u0275\u0275defineComponent"]({type:Q,selectors:[["app-card"]],decls:4,vars:3,consts:[[3,"showButtonBack","title",4,"ngIf"],[3,"background","backBackground","blur","showBackgroundOverlay",4,"ngIf"],[3,"cardId"],["collectionSelector",""],[3,"showButtonBack","title"],[3,"background","backBackground","blur","showBackgroundOverlay"],[1,"overlay",3,"ngClass"],["class","status-bar",3,"click",4,"ngIf"],[1,"header"],[3,"src","error"],["profileImage",""],[1,"infos"],[1,"name"],[1,"bio"],["class","view",3,"borderColor","click",4,"ngIf"],[1,"share"],["size","small","fill","clear",3,"click",4,"ngIf"],[1,"icons-grid"],["class","icon",4,"ngFor","ngForOf"],["class","icon placeholder",4,"ngIf"],[1,"status-bar",3,"click"],[1,"container"],[1,"left-container"],[1,"right-container"],[1,"info"],["name","people-outline"],["name","eye-outline"],[1,"view",3,"click"],["size","small","fill","clear",3,"click"],["slot","icon-only","name","share-social"],["slot","icon-only",3,"name"],[1,"icon"],["href","javascript:;",3,"click"],[3,"src"],[1,"icon-title"],[1,"icon","placeholder"],["name","add-outline",1,"placeholder-icon"]],template:function(e,t){1&e&&(l["\u0275\u0275template"](0,T,1,2,"base-toolbar",0),l["\u0275\u0275template"](1,$,19,19,"base-content",1),l["\u0275\u0275element"](2,"card-collection-selector",2,3)),2&e&&(l["\u0275\u0275property"]("ngIf",!t.isMyCard),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",t.user&&t.card&&t.background),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("cardId",null==t.card?null:t.card.id))},directives:[i.j,F,D.a,N.a,i.h,i.i,d.n,d.d],pipes:[U.a],styles:[".overlay[_ngcontent-%COMP%]{position:absolute;height:0;width:0;background-color:rgba(0,0,0,.5);opacity:0;z-index:9998;transition:opacity .5s;pointer-events:none}.overlay.show[_ngcontent-%COMP%]{pointer-events:all;height:100vh;width:100vw;opacity:1}.status-bar[_ngcontent-%COMP%]{height:28px;background-color:rgba(0,0,0,.3);color:#fff;padding:0 16px;display:flex;align-items:center;justify-content:space-between;font-size:14px;cursor:pointer}.status-bar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;margin-bottom:1px}.status-bar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:var(--container-width);max-width:var(--container-max-width);margin:0 auto;display:flex;justify-content:space-between}.status-bar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .right-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.status-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}@supports (-webkit-touch-callout:none){.status-bar[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin-right:12px!important}}.header[_ngcontent-%COMP%]{padding:25px 25px 0;width:var(--container-width);max-width:var(--container-max-width);margin:0 auto 8px;display:flex;cursor:pointer}@media (min-width:768px){.header[_ngcontent-%COMP%]{margin-bottom:24px}}.header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;margin-right:20px;-o-object-fit:cover;object-fit:cover;-o-object-position:center center;object-position:center center}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]{width:calc(100% - 92px)}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;letter-spacing:.4px}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{font-size:12px;max-height:32px;overflow:hidden;margin-bottom:8px}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .view[_ngcontent-%COMP%]{border:1px solid;border-radius:6px;height:22px;font-size:12px;padding:0 12px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:6px;white-space:nowrap}.header[_ngcontent-%COMP%]   .infos[_ngcontent-%COMP%]   .view[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .share[_ngcontent-%COMP%]{display:flex;align-items:center}.header[_ngcontent-%COMP%]   .share[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{transform:scale(1.2)}.icons-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);row-gap:12px;overflow-x:hidden;overflow-y:auto;width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}@media (min-width:768px){.icons-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}.icons-grid[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{opacity:.5}.icons-grid[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%]{border:2px dashed #fff;border-radius:10px;width:48px;height:48px}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{padding:5px;text-align:center}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .placeholder-icon[_ngcontent-%COMP%], .icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:58px;max-width:58px;margin-bottom:12px}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .icon-title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.2px;overflow:hidden;max-height:32px}.icons-grid[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;display:flex;flex-direction:column;align-items:center}.menu-button[_ngcontent-%COMP%]{background:transparent;outline:none;left:16px;bottom:32px;position:fixed}.menu-button[_ngcontent-%COMP%], .menu-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:32px;width:32px}"]}),Q),Y=n("3Pt+"),Z=n("iTUp"),ee=n("PCNd"),te=((K=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:K}),K.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||K)},imports:[[i.b,Y.f,Y.m,d.I,ee.a,Z.a,c.j.forChild([{path:"",component:W}])]]}),K)}}]);