function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{b23s:function(e,t,n){"use strict";n.r(t),n.d(t,"LinkedAccountsPageModule",(function(){return _}));var i,r,o=n("ofXK"),s=n("PCNd"),c=n("tyNb"),a=n("mrSG"),u=n("ZQB6"),l=n("fXoL"),d=n("qfBg"),v=n("lGQG"),h=n("5dVO"),g=n("2g2N"),p=n("TEn/"),f=n("uX3w"),k=n("RDGJ"),m=function(e){return{linked:e}},b=((r=function(){function e(t,n,i,r,o,s){_classCallCheck(this,e),this._userService=t,this._authService=n,this._loaderService=i,this._toastService=r,this._activatedRoute=o,this._navCtrl=s,this._socialMediaHelper=new u.a(this._userService)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this._activatedRoute.snapshot.queryParams.code;e&&this.toggleLinkedinAccountLink(e)}},{key:"ionViewDidEnter",value:function(){var e=this;this._userService.getLoggedUser().subscribe((function(t){return e.user=t}))}},{key:"toggleGoogleAccountLink",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._loaderService.show(),!this.user.googleUserId){e.next=4;break}this._userService.unlinkGoogleAccount(this.user.googleUserId).subscribe((function(e){return Object(a.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.user=e,this._loaderService.dismiss();case 1:case"end":return t.stop()}}),t,this)})))}),(function(e){n._toastService.show("Falha ao desvincular conta."),n._loaderService.dismiss()})),e.next=14;break;case 4:return e.prev=4,e.next=7,this._socialMediaHelper.loginWithGoogle();case 7:t=e.sent,this._userService.linkGoogleAccount(t.id).subscribe((function(e){n.user=e,n._loaderService.dismiss()}),(function(e){n._toastService.showHttpError(e),n._loaderService.dismiss()})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this._toastService.show(e.t0),this._loaderService.dismiss();case 14:case"end":return e.stop()}}),e,this,[[4,11]])})))}},{key:"toggleLinkedinAccountLink",value:function(e){var t;return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._loaderService.show(),!(null===(t=this.user)||void 0===t?void 0:t.linkedinUserId)){n.next=4;break}this._userService.unlinkLinkedinAccount(this.user.linkedinUserId).subscribe((function(e){r.user=e,r._loaderService.dismiss()}),(function(e){r._toastService.show("Falha ao desvincular conta."),r._loaderService.dismiss()})),n.next=14;break;case 4:return n.prev=4,n.next=7,this._socialMediaHelper.loginWithLinkedin(e,this._getLinkedinRedirectUrl());case 7:i=n.sent,this._userService.linkLinkedinAccount(i.id).subscribe((function(e){r.user=e,r._navCtrl.navigateRoot("/linked-accounts",{replaceUrl:!0}),r._loaderService.dismiss()}),(function(e){r._toastService.showHttpError(e),r._loaderService.dismiss()})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),this._toastService.show("Falha ao vincular conta."),this._loaderService.dismiss();case 14:case"end":return n.stop()}}),n,this,[[4,11]])})))}},{key:"toggleFacebookAccountLink",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._loaderService.show(),!this.user.facebookUserId){e.next=4;break}this._userService.unlinkFacebookAccount(this.user.facebookUserId).subscribe((function(e){n.user=e,FB.logout(),n._loaderService.dismiss()}),(function(e){n._toastService.show("Falha ao desvincular conta."),n._loaderService.dismiss()})),e.next=14;break;case 4:return e.prev=4,e.next=7,this._socialMediaHelper.loginWithFacebook();case 7:t=e.sent,this._userService.linkFacebookAccount(t.id).subscribe((function(e){n.user=e,n._loaderService.dismiss()}),(function(e){n._toastService.showHttpError(e),n._loaderService.dismiss()})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),this._toastService.show(e.t0),this._loaderService.dismiss();case 14:case"end":return e.stop()}}),e,this,[[4,11]])})))}},{key:"_getLinkedinRedirectUrl",value:function(){var e=this._activatedRoute.snapshot.queryParams.redirectRoute;return"".concat(window.location.href.split("?")[0]).concat(e?"?redirectRoute="+e:"")}}]),e}()).\u0275fac=function(e){return new(e||r)(l["\u0275\u0275directiveInject"](d.a),l["\u0275\u0275directiveInject"](v.a),l["\u0275\u0275directiveInject"](h.a),l["\u0275\u0275directiveInject"](g.a),l["\u0275\u0275directiveInject"](c.a),l["\u0275\u0275directiveInject"](p.M))},r.\u0275cmp=l["\u0275\u0275defineComponent"]({type:r,selectors:[["app-linked-accounts"]],decls:14,vars:13,consts:[["buttonBackRoute","/home/card","title","Contas vinculadas",3,"showButtonBack"],[1,"buttons"],[1,"outline-button",3,"ngClass","click"],["name","logo-google"],["name","logo-linkedin"],["name","logo-facebook"]],template:function(e,t){1&e&&(l["\u0275\u0275element"](0,"base-toolbar",0),l["\u0275\u0275elementStart"](1,"base-content"),l["\u0275\u0275elementStart"](2,"p"),l["\u0275\u0275text"](3,"O XPass te auxilia a criar aplicativos no seu cart\xe3o com as redes sociais vinculadas \ud83d\ude09"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"div",1),l["\u0275\u0275elementStart"](5,"button",2),l["\u0275\u0275listener"]("click",(function(){return t.toggleGoogleAccountLink()})),l["\u0275\u0275element"](6,"ion-icon",3),l["\u0275\u0275text"](7),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](8,"button",2),l["\u0275\u0275listener"]("click",(function(){return t.toggleLinkedinAccountLink()})),l["\u0275\u0275element"](9,"ion-icon",4),l["\u0275\u0275text"](10),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](11,"button",2),l["\u0275\u0275listener"]("click",(function(){return t.toggleFacebookAccountLink()})),l["\u0275\u0275element"](12,"ion-icon",5),l["\u0275\u0275text"](13),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275property"]("showButtonBack",!0),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](7,m,null==t.user?null:t.user.googleUserId)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",null!=t.user&&t.user.googleUserId?"Desvincular com Google":"Entrar com Google"," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](9,m,null==t.user?null:t.user.linkedinUserId)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",null!=t.user&&t.user.linkedinUserId?"Desvincular com Linkedin":"Entrar com Linkedin"," "),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](11,m,null==t.user?null:t.user.facebookUserId)),l["\u0275\u0275advance"](2),l["\u0275\u0275textInterpolate1"](" ",null!=t.user&&t.user.facebookUserId?"Desvincular com Facebook":"Entrar com Facebook"," "))},directives:[f.a,k.a,o.h,p.n],styles:["[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]{padding:24px;width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]     .content{background-color:var(--background-color)}[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:32px;display:flex;flex-direction:column;align-items:center;gap:12px}[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-family:montserrat;background-color:transparent;color:#414141;border:1px solid #414141;padding:0 1.1em;border-radius:4px;height:36px;display:flex;gap:8px;align-items:center;justify-content:center}"]}),r),_=((i=function e(){_classCallCheck(this,e)}).\u0275mod=l["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=l["\u0275\u0275defineInjector"]({factory:function(e){return new(e||i)},imports:[[o.b,s.a,c.j.forChild([{path:"",component:b}])]]}),i)}}]);