(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{b23s:function(e,t,i){"use strict";i.r(t),i.d(t,"LinkedAccountsPageModule",(function(){return b}));var n=i("ofXK"),s=i("PCNd"),o=i("tyNb"),r=i("mrSG"),c=i("ZQB6"),a=i("fXoL"),l=i("qfBg"),d=i("lGQG"),u=i("5dVO"),h=i("2g2N"),v=i("TEn/"),g=i("uX3w"),m=i("RDGJ");const _=function(e){return{linked:e}};let p=(()=>{class e{constructor(e,t,i,n,s,o){this._userService=e,this._authService=t,this._loaderService=i,this._toastService=n,this._activatedRoute=s,this._navCtrl=o,this._socialMediaHelper=new c.a(this._userService)}ngOnInit(){const e=this._activatedRoute.snapshot.queryParams.code;e&&this.toggleLinkedinAccountLink(e)}ionViewDidEnter(){this._userService.getLoggedUser().subscribe(e=>this.user=e)}toggleGoogleAccountLink(){return Object(r.a)(this,void 0,void 0,(function*(){if(this._loaderService.show(),this.user.googleUserId)this._userService.unlinkGoogleAccount(this.user.googleUserId).subscribe(e=>Object(r.a)(this,void 0,void 0,(function*(){this.user=e,this._loaderService.dismiss()})),e=>{this._toastService.show("Falha ao desvincular conta."),this._loaderService.dismiss()});else try{const e=yield this._socialMediaHelper.loginWithGoogle();this._userService.linkGoogleAccount(e.id).subscribe(e=>{this.user=e,this._loaderService.dismiss()},e=>{this._toastService.showHttpError(e),this._loaderService.dismiss()})}catch(e){this._toastService.show(e),this._loaderService.dismiss()}}))}toggleLinkedinAccountLink(e){var t;return Object(r.a)(this,void 0,void 0,(function*(){if(this._loaderService.show(),null===(t=this.user)||void 0===t?void 0:t.linkedinUserId)this._userService.unlinkLinkedinAccount(this.user.linkedinUserId).subscribe(e=>{this.user=e,this._loaderService.dismiss()},e=>{this._toastService.show("Falha ao desvincular conta."),this._loaderService.dismiss()});else try{const t=yield this._socialMediaHelper.loginWithLinkedin(e,this._getLinkedinRedirectUrl());this._userService.linkLinkedinAccount(t.id).subscribe(e=>{this.user=e,this._navCtrl.navigateRoot("/linked-accounts",{replaceUrl:!0}),this._loaderService.dismiss()},e=>{this._toastService.showHttpError(e),this._loaderService.dismiss()})}catch(i){this._toastService.show("Falha ao vincular conta."),this._loaderService.dismiss()}}))}toggleFacebookAccountLink(){return Object(r.a)(this,void 0,void 0,(function*(){if(this._loaderService.show(),this.user.facebookUserId)this._userService.unlinkFacebookAccount(this.user.facebookUserId).subscribe(e=>{this.user=e,FB.logout(),this._loaderService.dismiss()},e=>{this._toastService.show("Falha ao desvincular conta."),this._loaderService.dismiss()});else try{const e=yield this._socialMediaHelper.loginWithFacebook();this._userService.linkFacebookAccount(e.id).subscribe(e=>{this.user=e,this._loaderService.dismiss()},e=>{this._toastService.showHttpError(e),this._loaderService.dismiss()})}catch(e){this._toastService.show(e),this._loaderService.dismiss()}}))}_getLinkedinRedirectUrl(){const e=this._activatedRoute.snapshot.queryParams.redirectRoute;return`${window.location.href.split("?")[0]}${e?"?redirectRoute="+e:""}`}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](h.a),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](v.M))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["app-linked-accounts"]],decls:14,vars:13,consts:[["buttonBackRoute","/home/card","title","Contas vinculadas",3,"showButtonBack"],[1,"buttons"],[1,"outline-button",3,"ngClass","click"],["name","logo-google"],["name","logo-linkedin"],["name","logo-facebook"]],template:function(e,t){1&e&&(a["\u0275\u0275element"](0,"base-toolbar",0),a["\u0275\u0275elementStart"](1,"base-content"),a["\u0275\u0275elementStart"](2,"p"),a["\u0275\u0275text"](3,"O XPass te auxilia a criar aplicativos no seu cart\xe3o com as redes sociais vinculadas \u{1f609}"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",1),a["\u0275\u0275elementStart"](5,"button",2),a["\u0275\u0275listener"]("click",(function(){return t.toggleGoogleAccountLink()})),a["\u0275\u0275element"](6,"ion-icon",3),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"button",2),a["\u0275\u0275listener"]("click",(function(){return t.toggleLinkedinAccountLink()})),a["\u0275\u0275element"](9,"ion-icon",4),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"button",2),a["\u0275\u0275listener"]("click",(function(){return t.toggleFacebookAccountLink()})),a["\u0275\u0275element"](12,"ion-icon",5),a["\u0275\u0275text"](13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275property"]("showButtonBack",!0),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](7,_,null==t.user?null:t.user.googleUserId)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",null!=t.user&&t.user.googleUserId?"Desvincular com Google":"Entrar com Google"," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](9,_,null==t.user?null:t.user.linkedinUserId)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",null!=t.user&&t.user.linkedinUserId?"Desvincular com Linkedin":"Entrar com Linkedin"," "),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](11,_,null==t.user?null:t.user.facebookUserId)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",null!=t.user&&t.user.facebookUserId?"Desvincular com Facebook":"Entrar com Facebook"," "))},directives:[g.a,m.a,n.h,v.n],styles:["[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]{padding:24px;width:var(--container-width);max-width:var(--container-max-width);margin:0 auto}[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]     .content{background-color:var(--background-color)}[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:32px;display:flex;flex-direction:column;align-items:center;gap:12px}[_nghost-%COMP%]   base-content[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-family:montserrat;background-color:transparent;color:#414141;border:1px solid #414141;padding:0 1.1em;border-radius:4px;height:36px;display:flex;gap:8px;align-items:center;justify-content:center}"]}),e})(),b=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[n.b,s.a,o.j.forChild([{path:"",component:p}])]]}),e})()}}]);